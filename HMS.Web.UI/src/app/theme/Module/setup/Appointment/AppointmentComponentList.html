<div class="appointmentWraper">
    <div class="appointmentWraper">
        <div class="container-fluid AppointmentContainer">
            <div class="row">
                <div class="col">
                    <div class="Cardview m-0 mt-2">
                        <div class="header bg-gradient-danger  pt-2 pt-md-8 AppointmentHeader">
                            <div class="row AppointmentActionBlock m-0 pb-2 border-bottom">
                                <div class="col-sm-6">
                                    <h3 class="page_title">Appointment</h3>
                                </div>
                                <div class="col-sm-6">
                                    <div class="input-group searchWraper">
                                        <div class="input-group-icon">
                                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="currentColor"><path d="M11 5a6 6 0 1 0 0 12a6 6 0 0 0 0-12zm-8 6a8 8 0 1 1 14.32 4.906l3.387 3.387a1 1 0 0 1-1.414 1.414l-3.387-3.387A8 8 0 0 1 3 11z" /></g></svg>
                                        </div>
                                        <div class="form-group mb-0 col-sm-4  border-left">
                                            <Datetime-Component placeholder="DD/MM/YYYY" (DateChangeValue)="RefershCalendar($event)" [(ngModel)]="AppointmentDate">
                                            </Datetime-Component>
                                        </div>
                                        <div class="form-group mb-0 col border-right border-left">
                                            <input type="text" class="form-control form-control-sm form-control-alternative" [ngModelOptions]="{standalone:true}" [(ngModel)]="PatientName" (focusout)="onFocusOutEvent(PatientName,SearhPatientId)" id="PatientNameSearch" placeholder="Search Patient">
                                        </div>
                                        <div class="input-group-icon">
                                            <div ngbDropdown container="body">
                                                <button class="btn  btn-sm" ngbDropdownToggle>
                                                    <i class="mt-1 ni ni-bold-down"></i>
                                                </button>
                                                <div ngbDropdownMenu>
                                                    <button ngbDropdownItem (click)="FilterPatient(1)">Male only</button>
                                                    <button ngbDropdownItem (click)="FilterPatient(2)">Female Only</button>
                                                    <button ngbDropdownItem (click)="FilterPatient(3)">Tomorrow Patients</button>
                                                    
                                                    <button ngbDropdownItem (click)="FilterPatient(4)">Today Patients</button>
                                                    <button ngbDropdownItem (click)="FilterPatient(5)">Last Day Patients</button>
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="header-body" [ngClass]="{ShowpatientDetail: PatientDetailInfo == true ? true : false}">
                            <!-- Card stats -->
                            <div class="row flex-nowrap m-0">
                                <div class="col AppointmentLeftCol p-0">
                                    <div class="card- h100">
                                        <div class="card-body py-0 px-2">
                                            <div class="row h100">
                                                <div class="col h100 mt-2 pl-3 pr-3  ApptPatientDetail">
                                                    <div class="overflow_container">
                                                        <div class="row mx-0 mb-1">
                                                            <div class="col p-0">
                                                                <div class="TableView">
                                                                    <div class="dataTables_wrapper form-inline dt-uikit md-processed col-sm-12 p-0">
                                                                        <div class="uk-overflow-container col-sm-12 p-0">
                                                                            <table id="dt_tableTools" class="uk-table patient_List" cellspacing="0" style="width: 100%;">
                                                                                <tbody>
                                                                                    <tr *ngFor="let item of AppointmentList">
                                                                                        <td>
                                                                                            <div class="card card-stats mb-4 mb-xl-0" [ngClass]="item.ID === AppointId ? 'active' : 'none'">
                                                                                                <div class="card-body row py-3 no-wrap">
                                                                                                    <div class="col-sm-2" style="max-width:64px;" (click)="showPatientDetail(item.PatientId,AppointmentDate,item.ID)">
                                                                                                        <span class="avatar avatar-md rounded-circle" *ngIf="item.Gender==1 && (item.Image==null || item.Image =='')">
                                                                                                            <img src="../../../../../assets/app/media/img/patient-icon-4.jpg" />
                                                                                                        </span>
                                                                                                        <span class="avatar avatar-md rounded-circle" *ngIf="((item.Gender==2 ||item.Gender==3) && (item.Image==null || item.Image ==''))">
                                                                                                            <img src="../assets/app/media/img/patientgirl.png" class="img-fluid radius">
                                                                                                        </span>
                                                                                                        <span class="avatar avatar-md rounded-circle" *ngIf="item.Image!=null && item.Image!='' ">
                                                                                                            <img [src]="item.Image" class="img-fluid radius">
                                                                                                        </span>
                                                                                                    </div>
                                                                                                    <div class="col-sm-10 pl-0">
                                                                                                        <h5 class="card-title text-muted mb-0" (click)="showPatientDetail(item.PatientId,AppointmentDate,item.ID)">{{item.PatientName}}
                                                                                                            <span>
                                                                                                                ({{item.NewPatients}})
                                                                                                            </span>
                                                                                                        </h5>
                                                                                                        <div class="relative d-flex align-items-center">
                                                                                                            <span class="text-muted  font-12 m-0 text-center">
                                                                                                                {{item.AppointmentTime}}
                                                                                                            </span>
                                                                                                            <select class="form-control form-control-sm form-control-alternative" [disabled]="IsPreviousApp" [(ngModel)]="item.StatusId" (change)="StatusUpdateApp(item.StatusId,item.ID,item.DoctorId)">
                                                                                                                <option *ngFor="let stat of StatusList" [value]="stat.ID">
                                                                                                                    {{stat.Value}}
                                                                                                                </option>
                                                                                                            </select>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                    <tr [hidden]="!(AppointmentList.length == 0)" style="background:#fff;">
                                                                                        <td [attr.colspan]="10" align="center">
                                                                                            <p><img src="../../assets/app/media/img/noResult.gif" class="NoDataImg" /></p>
                                                                                            <strong class="nodateFound">No Patient Found</strong>
                                                                                        </td>
                                                                                    </tr>
                                                                                </tbody>
                                                                            </table>
                                                                        </div>
                                                                        <div class="mt-2 col-sm-12 p-0 d-flex align-items-center justify-content-between mb-3">
                                                                            <div style="font-size: 13px; color: #33396f;font-weight: normal;" class="dataTables_info" id="dt_tableTools_info" role="status" aria-live="polite">No {{((PModel.CurrentPage-1) * PModel.RecordPerPage) + 1}} - {{((PModel.CurrentPage * PModel.RecordPerPage) > PModel.TotalRecord ? PModel.TotalRecord : (PModel.CurrentPage * PModel.RecordPerPage))}} </div>
                                                                            <ul class="uk-pagination mt-2" [hidden]="!(PModel.TotalRecord > PModel.RecordPerPage)">
                                                                                <li class="paginate_button" [ngClass]="{'uk-disabled' : PModel.CurrentPage == 1}">
                                                                                    <a (click)="selectPatientPage(previousPage)">
                                                                                        <i class="icon icon-chevron-left"></i>
                                                                                    </a>
                                                                                </li>
                                                                                <li class="paginate_button" *ngFor="let page of pagesRange" [class.uk-active]="page == PModel.CurrentPage">
                                                                                    <a (click)="selectPatientPage(page)">
                                                                                        {{page}}
                                                                                    </a>
                                                                                </li>
                                                                                <li class="paginate_button" [ngClass]="{'uk-disabled' : PModel.CurrentPage == totalPages}">
                                                                                    <a (click)="selectPatientPage(nextPage)">
                                                                                        <i class="icon icon-chevron-right"></i>
                                                                                    </a>
                                                                                </li>
                                                                            </ul>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="collapse_wrap" *ngIf="!PatientDetailInfo">
                                                            <ngb-accordion [closeOthers]="true" activeIds="static-1">
                                                                <ngb-panel id="static-1">
                                                                    <ng-template ngbPanelTitle>
                                                                        Appointment Status
                                                                        <span class="float-right">
                                                                            <i class="icon icon-arrow-down-circle"></i>
                                                                        </span>
                                                                    </ng-template>
                                                                    <ng-template ngbPanelContent>
                                                                        <div class="row mx-0 mb-1 Appointment_status">
                                                                            <div class="col p-0">
                                                                                <div class="custom-control custom-checkbox mb-2" *ngFor="let s of AllStatusList">
                                                                                    <span>
                                                                                        <input type="checkbox" class="custom-control-input" [ngModelOptions]="{standalone:true}" [(ngModel)]="s.IsActive" (change)="StatusChangeFilter(s.ID)" id="{{'customCheck1'+s.ID}}" name="{{'NameCheck1'+s.ID}}">
                                                                                        <label class="custom-control-label {{s.Value}}" for="{{'customCheck1'+s.ID}}"> {{s.Value}}</label>
                                                                                        <span class="float-right">{{s.count}}</span>
                                                                                    </span>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </ng-template>
                                                                </ngb-panel>
                                                                <ngb-panel id="static-2">
                                                                    <ng-template ngbPanelTitle>
                                                                        Doctor List
                                                                        <span class="float-right">
                                                                            <i class="icon icon-arrow-down-circle"></i>
                                                                        </span>
                                                                    </ng-template>
                                                                    <ng-template ngbPanelContent>
                                                                        <div class="custom-control custom-checkbox mb-2" *ngFor="let d of DoctorList">
                                                                            <input type="checkbox" class="custom-control-input" [ngModelOptions]="{standalone:true}" [(ngModel)]="d.IsDoctor" (change)="IsShowDoctor(d.IsDoctor,d.ID)" id="{{'customCheck'+d.ID}}" name="{{'NameCheck'+d.ID}}">
                                                                            <label class="custom-control-label" for="{{'customCheck'+d.ID}}">{{d.Name}}</label>
                                                                        </div>
                                                                    </ng-template>
                                                                </ngb-panel>
                                                            </ngb-accordion>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col colFullCalendar p-0">
                                    <div class="row">
                                        <div class="col pl-1">
                                            <div class="card-">
                                                <div class="card-body p-2">
                                                    <div class="btn_calendar_right text-right" *ngIf="PatientDetailInfo==false">
                                                        <button class="btn btn-danger mb-2 mr-2" (click)="openDoctorModal(DocContent)" *ngIf="DoctAddRights.CreateRights">
                                                            <i class="icon icon-plus"></i>  Doctors
                                                        </button>
                                                        <button class="btn btn-danger mb-2 mr-2" (click)="openAppointmentModal(longContent)" *ngIf="ControlRights.CreateRights">
                                                            <i class="icon icon-plus"></i> Appointment
                                                        </button>
                                                        <!--<button class="btn btn-danger mb-2 mr-2" (click)="openSurgeyModal(SurgeryContent)" *ngIf="ControlRights.CreateRights">
                                                            <i class="icon icon-plus"></i> Surgery
                                                        </button>-->

                                                    </div>
                                                    <div id="calendar" class="calendardiv"></div>
                                                    <!-- ================== End of Calendar   -->
                                                    <div class="PatientDetailBox" *ngIf="PatientDetailInfo">
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="card border-0">
                                                                    <span class="clsoe closePatietnDetail" (click)="ShowCalander()">
                                                                        <i class="icon icon-cross"></i>
                                                                    </span>
                                                                    <div class="card-body p-2 NavtabLine">
                                                                        <div class="card-body p-2 NavtabLine">
                                                                            <ul class="nav nav-tabs">
                                                                                <li class="nav-item" (click)="PrescriptionPage()" *ngIf="Rights.indexOf(21)>-1">
                                                                                    <a class="nav-link" data-toggle="tab" href="#Prescription">Prescription  </a>
                                                                                </li>
                                                                                <li class="nav-item" (click)="loadVital()" *ngIf="Rights.indexOf(24)>-1">
                                                                                    <a class="nav-link" data-toggle="tab" href="#Vital">Vital</a>
                                                                                </li>
                                                                                <li class="nav-item" (click)="PrescriptionPage()" *ngIf="Rights.indexOf(23)>-1">
                                                                                    <a class="nav-link" data-toggle="tab" href="#BasicInfo">Basic Info </a>
                                                                                </li>
                                                                                <li class="nav-item" (click)="ShowAppointment()" *ngIf="Rights.indexOf(13)>-1">
                                                                                    <a class="nav-link" data-toggle="tab" href="#Appointments">
                                                                                        Appointments
                                                                                    </a>
                                                                                </li>
                                                                                <li class="nav-item" (click)="PrescriptionPage()" *ngIf="Rights.indexOf(23)>-1">
                                                                                    <a class="nav-link" data-toggle="tab" href="#HealthInformation"> Health Information</a>
                                                                                </li>
                                                                                <li class="nav-item" (click)="PrescriptionPage()" *ngIf="Rights.indexOf(23)>-1">
                                                                                    <a class="nav-link" data-toggle="tab" href="#MedicalHistory">Medical History  </a>
                                                                                </li>
                                                                                <li class="nav-item" (click)="LoadBillList()" *ngIf="Rights.indexOf(12)>-1">
                                                                                    <a class="nav-link" data-toggle="tab" href="#Billing">Billing  </a>
                                                                                </li>

                                                                                <li class="nav-item" (click)="LoadDocuments()" *ngIf="Rights.indexOf(25)>-1">
                                                                                    <a class="nav-link" data-toggle="tab" href="#Documents">Documents  </a>
                                                                                </li>
                                                                            </ul>
                                                                            <!-- Tab panes -->
                                                                            <div class="tab-content" *ngIf="IsPatient==false">
                                                                                <router-outlet></router-outlet>
                                                                            </div>
                                                                            <div class="tab-content" *ngIf="IsPatient">
                                                                                <div class="tab-pane active" id="Prescription">
                                                                                    <form [formGroup]="Form6" novalidate (ngSubmit)="PrescriptionSaveOrUpdate(Form6.valid)">
                                                                                        <div class="row">
                                                                                            <div class="col-sm-12 mt-3">
                                                                                                <div class="row mb-2">

                                                                                                    <div class="col-sm-3">
                                                                                                        <label>Date</label>
                                                                                                        <div class="input-group mb-3 input-group-sm" style="flex-wrap: nowrap;">
                                                                                                            <div class="small-input">
                                                                                                                <select class="form-control form-control-sm flex-grow-1" formControlName="AppointmentId" [(ngModel)]="PrescriptionModel.AppointmentId" (change)="onAppointDateChange($event)">
                                                                                                                    <option [value]="d.ID" *ngFor="let d of CurntPrevDateList">
                                                                                                                        {{d.AppointmentDate}}
                                                                                                                    </option>
                                                                                                                </select>
                                                                                                                <small class="text-danger" *ngIf="Form6.controls.AppointDate.hasError('required') && submitted">
                                                                                                                    This value is required.
                                                                                                                </small>
                                                                                                            </div>
                                                                                                            <div class="input-group-append" *ngIf="PrescriptionExist">
                                                                                                                <span class="btn btn-danger px-1" placement="right" ngbTooltip="Add Appointment" (click)="openAppointmentModal(longContent)">
                                                                                                                    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" style="font-size: 21px;" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><path d="M10.75 8c-.41 0-.75.34-.75.75v4.69c0 .35.18.67.47.85l3.64 2.24a.713.713 0 1 0 .74-1.22L11.5 13.3V8.75c0-.41-.34-.75-.75-.75z" fill="currentColor" /><path d="M17.92 12A6.957 6.957 0 0 1 11 20c-3.9 0-7-3.1-7-7s3.1-7 7-7c.7 0 1.37.1 2 .29V4.23c-.64-.15-1.31-.23-2-.23c-5 0-9 4-9 9s4 9 9 9a8.963 8.963 0 0 0 8.94-10h-2.02z" fill="currentColor" /><path d="M22 5h-2V3c0-.55-.45-1-1-1s-1 .45-1 1v2h-2c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1V7h2c.55 0 1-.45 1-1s-.45-1-1-1z" fill="currentColor" /></svg>
                                                                                                                </span>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="col-sm-3">
                                                                                                        <div class="form-group">
                                                                                                            <label>Clinic</label>
                                                                                                            <div class="form-group">
                                                                                                                <select class="form-control form-control-sm" formControlName="ClinicId" [(ngModel)]="PrescriptionModel.ClinicId">
                                                                                                                    <option *ngFor="let item of ClinicList" [value]="item.CompanyID">
                                                                                                                        {{item.CompanyName}}
                                                                                                                    </option>
                                                                                                                </select>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="col-sm-3">
                                                                                                        <div class="form-group">
                                                                                                            <label>Patient</label>
                                                                                                            <div class="input-group mb-3">
                                                                                                                <input class="form-control  form-control-sm" formControlName="PatientName" [(ngModel)]="PrescriptionModel.PatientName" readonly />
                                                                                                                <small class="text-danger" *ngIf="Form6.controls.PatientName.hasError('required') && submitted">
                                                                                                                    This value is required.
                                                                                                                </small>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="col-sm-3">
                                                                                                        <div class="form-group">
                                                                                                            <label>Doctor</label>
                                                                                                            <select class="form-control form-control-sm" formControlName="DoctorId" [(ngModel)]="PrescriptionModel.DoctorId" [disabled]="RoleName == 'Doctor' ? true : false">
                                                                                                                <option *ngFor="let item of DoctorList" [value]="item.ID">
                                                                                                                    {{item.Name}}
                                                                                                                </option>
                                                                                                            </select>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="col-sm-12 p-0 CustomAccordion dark">
                                                                                            <ngb-accordion [closeOthers]="false" activeIds="prescription0">
                                                                                                <ngb-panel id="prescription0">
                                                                                                    <ng-template ngbPanelTitle>
                                                                                                        <span>
                                                                                                            <img src="../assets/app/media/img/icons/clinic.png" class="img-fluid radius">
                                                                                                            Clinic Note
                                                                                                        </span><i class="icon-chevron-right iconImage"></i>
                                                                                                    </ng-template>
                                                                                                    <ng-template ngbPanelContent>
                                                                                                        <div class="mt-2">
                                                                                                            <div class="row">
                                                                                                                <div class="col-sm-3">
                                                                                                                    <h6 scope="col">Complaint</h6>
                                                                                                                    <div class="d-flex mb-3">
                                                                                                                        <input class="form-control form-control-sm form-control-alternative" placeholder="Search Complaint" value="" id="ComplaintSearch" (click)="LoadComplaint()" [ngModelOptions]="{standalone:true}" [(ngModel)]="complaintModel.Complaint" (keydown.enter)="$event.preventDefault()">
                                                                                                                        <span class="btn btn-secondary ml-2" (click)="AddComplaint(complaintModel.Complaint)">Add</span>
                                                                                                                    </div>
                                                                                                                    <div class="btn-group btn-group-toggle btn-toggle-label btn_suggestion" data-toggle="buttons" *ngFor="let c of emr_prescription_complaint_dynamicArray;  let h = index">
                                                                                                                        <div class="suggestion_label w-100 btn p-0" *ngIf="c.IsSelected">
                                                                                                                            <label class="btn-light  w-100 active mb-0">
                                                                                                                                <span (click)="ExistComplaint(c)">
                                                                                                                                    <input type="checkbox" name="options" id="ComplaintList__{{h}}" autocomplete="off" checked>
                                                                                                                                    <i class="icon icon-check"></i>
                                                                                                                                    {{c.Complaint}}
                                                                                                                                </span>
                                                                                                                            </label>
                                                                                                                        </div>
                                                                                                                        <!-- ======== -->
                                                                                                                        <div class="suggestion_label w-100  btn p-0" *ngIf="c.IsSelected==false">
                                                                                                                            <label class="btn-light  w-100 mb-0">
                                                                                                                                <span (click)="ExistComplaint(c)">
                                                                                                                                    <input type="checkbox" name="options" id="ComplaintList{{h}}" autocomplete="off">
                                                                                                                                    <i class="icon icon-check"></i>
                                                                                                                                    {{c.Complaint}}
                                                                                                                                </span>
                                                                                                                            </label>
                                                                                                                        </div>
                                                                                                                        <span class="fav_icon active" placement="right" ngbTooltip="Now This will show as most used" (click)="AddFavorite(c,'C')" *ngIf="c.Isfavorite == 1 && c.ComplaintId != null">
                                                                                                                            <span class="fa fa-star" style="color:#fdd273;"></span>
                                                                                                                        </span>
                                                                                                                        <span class="fav_icon" placement="right" ngbTooltip="Make this Most used Suggestion" (click)="AddFavorite(c,'C')" *ngIf="c.Isfavorite == 0 && c.ComplaintId != null">
                                                                                                                            <span class="fa fa-star-o"></span>
                                                                                                                        </span>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div class="col-sm-3">
                                                                                                                    <h6 scope="col">Examination</h6>
                                                                                                                    <div class="d-flex mb-3">
                                                                                                                        <input class="form-control form-control-sm form-control-alternative" placeholder="Search Examination" value="" id="ObservationSearch" (click)="LoadObservation()" [ngModelOptions]="{standalone:true}" [(ngModel)]="observationModel.Observation" (keydown.enter)="$event.preventDefault()">
                                                                                                                        <span class="btn btn-secondary ml-2" (click)="AddObservation(observationModel.Observation)">Add</span>
                                                                                                                    </div>

                                                                                                                    <div class="btn-group btn-group-toggle btn-toggle-label btn_suggestion" data-toggle="buttons" *ngFor="let c of emr_prescription_observation_dynamicArray;  let h = index">
                                                                                                                        <div class="suggestion_label w-100 btn p-0" *ngIf="c.IsSelected">
                                                                                                                            <label class="btn-light  w-100 active mb-0">
                                                                                                                                <span (click)="ExistObservation(c)">
                                                                                                                                    <input type="checkbox" name="options" id="ObservationList__{{h}}" autocomplete="off" checked>
                                                                                                                                    <i class="icon icon-check"></i>
                                                                                                                                    {{c.Observation}}
                                                                                                                                </span>
                                                                                                                            </label>
                                                                                                                        </div>
                                                                                                                        <!-- ======== -->
                                                                                                                        <div class="suggestion_label w-100  btn p-0" *ngIf="c.IsSelected==false">
                                                                                                                            <label class="btn-light  w-100 mb-0">
                                                                                                                                <span (click)="ExistObservation(c)">
                                                                                                                                    <input type="checkbox" name="options" id="ObservationList{{h}}" autocomplete="off">
                                                                                                                                    <i class="icon icon-check"></i>
                                                                                                                                    {{c.Observation}}
                                                                                                                                </span>
                                                                                                                            </label>
                                                                                                                        </div>
                                                                                                                        <span class="fav_icon active" placement="right" ngbTooltip="Now This will show as most used" (click)="AddFavorite(c,'O')" *ngIf="c.Isfavorite == 1 && c.ObservationId != null">
                                                                                                                            <span class="fa fa-star" style="color:#fdd273;"></span>
                                                                                                                        </span>
                                                                                                                        <span class="fav_icon" placement="right" ngbTooltip="Make this Most used Suggestion" (click)="AddFavorite(c,'O')" *ngIf="c.Isfavorite == 0 && c.ObservationId != null">
                                                                                                                            <span class="fa fa-star-o"></span>
                                                                                                                        </span>
                                                                                                                    </div>


                                                                                                                </div>
                                                                                                                <div class="col-sm-3">
                                                                                                                    <h6 scope="col">Investigations</h6>
                                                                                                                    <div class="d-flex mb-3">
                                                                                                                        <input class="form-control form-control-sm form-control-alternative" placeholder="Search Investigations" value="" id="InvestigationSearch" (click)="LoadInvestigation()" [ngModelOptions]="{standalone:true}" [(ngModel)]="investigationModel.Investigation" (keydown.enter)="$event.preventDefault()">
                                                                                                                        <span class="btn btn-secondary ml-2" (click)="AddInvestigations(investigationModel.Investigation)">Add</span>
                                                                                                                    </div>
                                                                                                                    <div class="btn-group btn-group-toggle btn-toggle-label btn_suggestion" data-toggle="buttons" *ngFor="let c of emr_prescription_investigation_dynamicArray;  let h = index">
                                                                                                                        <div class="suggestion_label w-100 btn p-0" *ngIf="c.IsSelected">
                                                                                                                            <label class="btn-light  w-100 active mb-0">
                                                                                                                                <span (click)="ExistInvestigations(c)">
                                                                                                                                    <input type="checkbox" name="options" id="InvestigationsList__{{h}}" autocomplete="off" checked>
                                                                                                                                    <i class="icon icon-check"></i>
                                                                                                                                    {{c.Investigation}}
                                                                                                                                </span>
                                                                                                                            </label>
                                                                                                                        </div>
                                                                                                                        <!-- ======== -->
                                                                                                                        <div class="suggestion_label w-100  btn p-0" *ngIf="c.IsSelected==false">
                                                                                                                            <label class="btn-light  w-100 mb-0">
                                                                                                                                <span (click)="ExistInvestigations(c)">
                                                                                                                                    <input type="checkbox" name="options" id="InvestigationsList{{h}}" autocomplete="off">
                                                                                                                                    <i class="icon icon-check"></i>
                                                                                                                                    {{c.Investigation}}
                                                                                                                                </span>
                                                                                                                            </label>
                                                                                                                        </div>
                                                                                                                        <span class="fav_icon active" placement="right" ngbTooltip="Now This will show as most used" (click)="AddFavorite(c,'I')" *ngIf="c.Isfavorite == 1 && c.InvestigationId != null">
                                                                                                                            <span class="fa fa-star" style="color:#fdd273;"></span>
                                                                                                                        </span>
                                                                                                                        <span class="fav_icon" placement="right" ngbTooltip="Make this Most used Suggestion" (click)="AddFavorite(c,'I')" *ngIf="c.Isfavorite == 0 && c.InvestigationId != null">
                                                                                                                            <span class="fa fa-star-o"></span>
                                                                                                                        </span>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div class="col-sm-3">
                                                                                                                    <h6 scope="col">Diagnosis</h6>
                                                                                                                    <div class="d-flex mb-3">
                                                                                                                        <input class="form-control form-control-sm form-control-alternative" placeholder="Search Diagnosis" value="" id="DiagnosSearch" (click)="LoadDiagnos()" [ngModelOptions]="{standalone:true}" [(ngModel)]="diagnosModel.Diagnos" (keydown.enter)="$event.preventDefault()">
                                                                                                                        <span class="btn btn-secondary ml-2" (click)="AddDiagnosis(diagnosModel.Diagnos)">Add</span>
                                                                                                                    </div>

                                                                                                                    <div class="btn-group btn-group-toggle btn-toggle-label btn_suggestion" data-toggle="buttons" *ngFor="let c of emr_prescription_diagnos_dynamicArray;  let h = index">
                                                                                                                        <div class="suggestion_label w-100 btn p-0" *ngIf="c.IsSelected">
                                                                                                                            <label class="btn-light  w-100 active mb-0">
                                                                                                                                <span (click)="ExistDiagnosis(c)">
                                                                                                                                    <input type="checkbox" name="options" id="DiagnosList__{{h}}" autocomplete="off" checked>
                                                                                                                                    <i class="icon icon-check"></i>
                                                                                                                                    {{c.Diagnos}}
                                                                                                                                </span>
                                                                                                                            </label>
                                                                                                                        </div>
                                                                                                                        <!-- ======== -->
                                                                                                                        <div class="suggestion_label w-100  btn p-0" *ngIf="c.IsSelected==false">
                                                                                                                            <label class="btn-light  w-100 mb-0">
                                                                                                                                <span (click)="ExistDiagnosis(c)">
                                                                                                                                    <input type="checkbox" name="options" id="DiagnosList{{h}}" autocomplete="off">
                                                                                                                                    <i class="icon icon-check"></i>
                                                                                                                                    {{c.Diagnos}}
                                                                                                                                </span>
                                                                                                                            </label>
                                                                                                                        </div>
                                                                                                                        <span class="fav_icon active" placement="right" ngbTooltip="Now This will show as most used" (click)="AddFavorite(c,'D')" *ngIf="c.Isfavorite == 1 && c.DiagnosId != null">
                                                                                                                            <span class="fa fa-star" style="color:#fdd273;"></span>
                                                                                                                        </span>
                                                                                                                        <span class="fav_icon" placement="right" ngbTooltip="Make this Most used Suggestion" (click)="AddFavorite(c,'D')" *ngIf="c.Isfavorite == 0 && c.DiagnosId != null">
                                                                                                                            <span class="fa fa-star-o"></span>
                                                                                                                        </span>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </ng-template>
                                                                                                </ngb-panel>
                                                                                                <ngb-panel id="prescription-1">
                                                                                                    <ng-template ngbPanelTitle>
                                                                                                        <span>
                                                                                                            <img src="../assets/app/media/img/icons/Medicines.png" class="img-fluid radius">
                                                                                                            Medicines
                                                                                                        </span><i class="icon-chevron-right iconImage"></i>
                                                                                                    </ng-template>
                                                                                                    <ng-template ngbPanelContent>
                                                                                                        <div class="row">
                                                                                                            <div class="col-sm-9">
                                                                                                                <div style="position: absolute; top: -67px; left: 160px;">
                                                                                                                    <span placement="right" ngbTooltip="Medicine Template" class="font-12 ml-2 badge bg-danger  text-white font-weight-normal" (click)="OpemMedicineTemplate(MedicineTemplate)">
                                                                                                                        Tempaltes <i class="icon icon-plus"></i>
                                                                                                                    </span>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <div class="table-">
                                                                                                            <table class="table table-bordered">
                                                                                                                <thead>
                                                                                                                    <tr>
                                                                                                                        <th scope="col" style="width:150px;">Medicine</th>
                                                                                                                        <th style="width:90px;">-</th>
                                                                                                                        <th scope="col">Dosage</th>
                                                                                                                        <th scope="col" style="width:70px;">Duration</th>
                                                                                                                        <th scope="col" style="width:90px;"></th>
                                                                                                                        <th scope="col">Instruction</th>
                                                                                                                        <th>-</th>
                                                                                                                    </tr>
                                                                                                                </thead>
                                                                                                                <tbody>
                                                                                                                    <tr *ngFor="let dynamic of emr_prescription_treatment_dynamicArray; let i = index;">
                                                                                                                        <td>
                                                                                                                            <input type="text" class="form-control form-control-sm" id="txtMedicine_{{i}}" name="Medicine" [ngModelOptions]="{standalone:true}" [(ngModel)]="dynamic.MedicineName" (click)="LoadMedicine(i)" autocomplete="off">
                                                                                                                        </td>
                                                                                                                        <td class="smallbox">
                                                                                                                            <div class="custom-control custom-checkbox" style="min-width: 95px;" placement="top" ngbTooltip="If you check this, You can save Medicine for , Future used. ">
                                                                                                                                <input type="checkbox" class="custom-control-input" id="Futureusage_{{i}}" name="FutureUsage" [ngModelOptions]="{standalone:true}" [(ngModel)]="dynamic.Futureusage" (change)="SaveMedicine(dynamic.Futureusage,i)">
                                                                                                                                <label class="custom-control-label" for="Futureusage_{{i}}">Future <i class="fa fa-question-circle" aria-hidden="true"></i></label>
                                                                                                                            </div>
                                                                                                                        </td>
                                                                                                                        <td>
                                                                                                                            <div class="row">
                                                                                                                                <div class="col d-flex flex-checkbox smallbox">
                                                                                                                                    <div class="custom-control">
                                                                                                                                        <label class="" for="Morning_{{i}}">M</label>
                                                                                                                                        <input type="text" class="form-control form-control-sm" id="Morning_{{i}}" name="Morning" [ngModelOptions]="{standalone:true}" [(ngModel)]="dynamic.Morning">
                                                                                                                                    </div>
                                                                                                                                    <div class="">
                                                                                                                                        <label class="" for="AfterNoon_{{i}}">A</label>
                                                                                                                                        <input type="text" class="form-control form-control-sm" id="AfterNoon_{{i}}" name="AfterNoon" [ngModelOptions]="{standalone:true}" [(ngModel)]="dynamic.AfterNoon">
                                                                                                                                    </div>
                                                                                                                                    <div class="">
                                                                                                                                        <label class="" for="Evening_{{i}}">E</label>
                                                                                                                                        <input type="text" class="form-control form-control-sm" id="Evening_{{i}}" name="Evening" [ngModelOptions]="{standalone:true}" [(ngModel)]="dynamic.Evening">
                                                                                                                                    </div>
                                                                                                                                    <div class="">
                                                                                                                                        <label class="" for="Night_{{i}}">N</label>
                                                                                                                                        <input type="text" class="form-control form-control-sm" id="Night_{{i}}" name="Night" [ngModelOptions]="{standalone:true}" [(ngModel)]="dynamic.Night">
                                                                                                                                    </div>
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                        </td>
                                                                                                                        <td>
                                                                                                                            <input class="form-control form-control-sm form-control-alternative" placeholder="Days" [ngModelOptions]="{standalone:true}" [(ngModel)]="dynamic.Duration">
                                                                                                                        </td>
                                                                                                                        <td>
                                                                                                                            <select [ngModelOptions]="{standalone:true}" [(ngModel)]="dynamic.DurationValue" class="form-control">
                                                                                                                                <option *ngFor="let item of DurationList" [ngValue]="item.Name">{{item.Name}}</option>
                                                                                                                            </select>
                                                                                                                        </td>
                                                                                                                        <td>
                                                                                                                            <textarea class="form-control form-control-sm" rows="1" id="txtInstructions_{{i}}" name="Instructions" [ngModelOptions]="{standalone:true}" [(ngModel)]="dynamic.Instructions" (click)="LoadInstructions(i)" autocomplete="off"></textarea>
                                                                                                                        </td>
                                                                                                                        <td>
                                                                                                                            <i class="icon icon-cross" (click)="RemoveRow(i)"></i>
                                                                                                                        </td>
                                                                                                                    </tr>
                                                                                                                </tbody>
                                                                                                            </table>
                                                                                                            <div class="row">
                                                                                                                <div class="col-sm-6">
                                                                                                                    <span class="btn btn-light btn-sm text-primary" style="height: 28px;" (click)="Addtreatment()">
                                                                                                                        <i class="icon icon-plus-circle"></i> Add Row
                                                                                                                    </span>
                                                                                                                </div>
                                                                                                                <div class="col-sm-3 px-0">
                                                                                                                    <div *ngIf="PrescriptionModel.IsTemplate ">
                                                                                                                        <input type="text" formControlName="TemplateName" [(ngModel)]="PrescriptionModel.TemplateName" class="form-control form-control-sm" placeholder="Tempalte Name" />
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div class="col-sm-3 pl-0 text-right">
                                                                                                                    <div class="custom-control custom-checkbox mb-2 py-1">
                                                                                                                        <input formControlName="IsTemplate" [(ngModel)]="PrescriptionModel.IsTemplate" type="checkbox" class="custom-control-input" id="templateSave" name="template">
                                                                                                                        <label class="custom-control-label" for="templateSave">Save as Template </label>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </ng-template>
                                                                                                </ngb-panel>
                                                                                                <ngb-panel id="prescription2">
                                                                                                    <ng-template ngbPanelTitle>
                                                                                                        <span>
                                                                                                            <img src="../assets/app/media/img/icons/remakrs.png" class="img-fluid radius">
                                                                                                            Detail Remarks
                                                                                                        </span><i class="icon-chevron-right iconImage"></i>
                                                                                                    </ng-template>
                                                                                                    <ng-template ngbPanelContent>
                                                                                                        <div class="row mt-2">
                                                                                                            <div class="col-sm-12 mt-2">
                                                                                                                <textarea formControlName="Notes" [(ngModel)]="PrescriptionModel.Notes" rows="4" style="height:70px;" class="form-control form-control-sm form-control-alternative" placeholder="Detail Notes Here"></textarea>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </ng-template>
                                                                                                </ngb-panel>
                                                                                                <ngb-panel id="prescription">
                                                                                                    <ng-template ngbPanelTitle>
                                                                                                        <span>
                                                                                                            <img src="../assets/app/media/img/icons/Follow.png" class="img-fluid radius">
                                                                                                            Follow Up / Surgery
                                                                                                        </span><i class="icon-chevron-right iconImage"></i>
                                                                                                    </ng-template>
                                                                                                    <ng-template ngbPanelContent>
                                                                                                        <div class="row mt-4">

                                                                                                            <div class="col-sm-3">
                                                                                                                <div class="custom-control custom-checkbox mb-3 py-1">
                                                                                                                    <input type="checkbox" class="custom-control-input" id="CreateAppointment" formControlName="IsCreateAppointment" [(ngModel)]="PrescriptionModel.IsCreateAppointment">
                                                                                                                    <label class="custom-control-label" for="CreateAppointment">Create Appointment</label>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="col-sm-1">
                                                                                                                <strong>OR</strong>
                                                                                                            </div>
                                                                                                            <div class="col-sm-3">
                                                                                                                <div class="custom-control custom-checkbox mb-3 py-1">
                                                                                                                    <input type="checkbox" class="custom-control-input" id="ScheduleSurgery">
                                                                                                                    <label class="custom-control-label" for="ScheduleSurgery">Schedule Surgery</label>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <div class="row">
                                                                                                            <div class="col-sm-6">
                                                                                                                <hr />
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <div class="row">
                                                                                                            <div class="col-sm-3 small-input">
                                                                                                                <div class="form-group">
                                                                                                                    <label>Day</label>
                                                                                                                    <input type="text" formControlName="Day" [(ngModel)]="PrescriptionModel.Day" maxlength="500" class="form-control" (keyup)="OnDayEnter()">
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="col-sm-3 small-input">
                                                                                                                <div class="form-group">
                                                                                                                    <label>Date</label>
                                                                                                                    <Datetime-Component formControlName="FollowUpDate" placeholder="DD/MM/YYYY" (DateChangeValue)="onFollowUpDateChanged($event)" [(ngModel)]="PrescriptionModel.FollowUpDate">
                                                                                                                    </Datetime-Component>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="col-sm-3">
                                                                                                                <div class="form-group">
                                                                                                                    <label>Time</label>
                                                                                                                    <input type="text" class="form-control time" formControlName="FollowUpTime" [(ngModel)]="PrescriptionModel.FollowUpTime" (click)="FollowUpSelectTime()" (change)="ChnageFollowUpSelectTime()" id="FollowupbasicTime" autocomplete="off">
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <div class="row">
                                                                                                            <div class="col-sm-12">
                                                                                                                <div class="form-group">
                                                                                                                    <label>FollowUp Note</label>
                                                                                                                    <textarea formControlName="FollowUpNotes" [(ngModel)]="PrescriptionModel.FollowUpNotes" rows="4" style="height:70px;" class="form-control form-control-sm form-control-alternative" placeholder="FollowUp Notes Here"></textarea>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <div class="row" *ngIf="Surgery_sect">
                                                                                                            <div class="col-sm-7">

                                                                                                                <div class="row form-group">
                                                                                                                    <div class="col-4 text-right">
                                                                                                                        <label class="form-control-label mt-2" for="input-username"> Examiner</label>
                                                                                                                    </div>
                                                                                                                    <div class="col-8">
                                                                                                                        <select class="form-control form-control-sm form-control-alternative">
                                                                                                                            <option>
                                                                                                                                Dr Saleem ullah
                                                                                                                            </option>
                                                                                                                        </select>
                                                                                                                        <small class="text-danger" *ngIf="Form2.controls.DoctorId.hasError('required') && submitted">
                                                                                                                            This value is required.
                                                                                                                        </small>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div class="row form-group">
                                                                                                                    <div class="col-4 text-right">
                                                                                                                        <label class="form-control-label mt-2" for="input-username"> Admission Date / Time</label>
                                                                                                                    </div>
                                                                                                                    <div class="col-4">
                                                                                                                        <Datetime-Component placeholder="DD/MM/YYYY">
                                                                                                                        </Datetime-Component>
                                                                                                                        <small class="text-danger" *ngIf="Form2.controls.AppointmentDate.hasError('required') && submitted">
                                                                                                                            This value is required.
                                                                                                                        </small>
                                                                                                                    </div>
                                                                                                                    <div class="col-4">
                                                                                                                        <input type="text" class="form-control time" id="basicExample" autocomplete="off">
                                                                                                                        <small class="text-danger" *ngIf="Form2.controls.AppointmentTime.hasError('required') && submitted">
                                                                                                                            This value is required.
                                                                                                                        </small>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <!-- =============== -->

                                                                                                                <div class="row form-group">
                                                                                                                    <div class="col-4 text-right">
                                                                                                                        <label class="form-control-label mt-2" for="input-username"> Loction</label>
                                                                                                                    </div>
                                                                                                                    <div class="col-8">
                                                                                                                        <select class="form-control form-control-sm form-control-alternative">
                                                                                                                            <option>
                                                                                                                                Loction List
                                                                                                                            </option>
                                                                                                                        </select>
                                                                                                                        <small class="text-danger" *ngIf="Form2.controls.DoctorId.hasError('required') && submitted">
                                                                                                                            This value is required.
                                                                                                                        </small>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <hr />
                                                                                                                <!-- =============== -->

                                                                                                                <div class="row form-group">
                                                                                                                    <div class="col-4 text-right">
                                                                                                                        <label class="form-control-label mt-2" for="input-username"> Reason for Visit</label>
                                                                                                                    </div>
                                                                                                                    <div class="col-8">
                                                                                                                        <textarea class="form-control-alternative form-control"></textarea>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>

                                                                                                    </ng-template>
                                                                                                </ngb-panel>
                                                                                            </ngb-accordion>
                                                                                            <div class="col text-right mt-5">
                                                                                                <span class="btn btn-secondary btn- mb-2 mr-2" (click)="SendEmail()"> Send Email</span>
                                                                                                <span class="btn btn-secondary btn- mb-2 mr-2" (click)="PrintAndSave()"> Rx Print</span>
                                                                                                <button type="submit" class="btn btn-primary btn- mb-2"> Save </button>
                                                                                            </div>
                                                                                        </div>
                                                                                    </form>
                                                                                </div>
                                                                                <div class="tab-pane" id="BasicInfo">
                                                                                    <div class="px-4 mt-1">
                                                                                        <div class="row">
                                                                                            <div class="col-sm-12">
                                                                                                <form [formGroup]="Form7" novalidate (ngSubmit)="PatientSaveOrUpdate(Form7.valid)">
                                                                                                    <div class="row mt-4">
                                                                                                        <div class="col-sm-7">
                                                                                                            <div class="row form-group">
                                                                                                                <div class="col-4 text-right">
                                                                                                                    <label class="form-control-label mt-2 pl-0 required"> Name</label>
                                                                                                                </div>
                                                                                                                <div class="col-8 d-flex">
                                                                                                                    <select class="form-control" style="max-width:100px;" formControlName="PrefixTittleId" [(ngModel)]="model.PrefixTittleId">
                                                                                                                        <option *ngFor="let item of TittleList" [value]="item.ID">
                                                                                                                            {{item.Value}}
                                                                                                                        </option>
                                                                                                                    </select>
                                                                                                                    <input type="text" class="form-control border-left-0" formControlName="PatientName" [(ngModel)]="model.PatientName" />
                                                                                                                    <small class="text-danger" *ngIf="Form7.controls.PatientName.hasError('required') && submitted">
                                                                                                                        This value is required.
                                                                                                                    </small>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="row form-group">
                                                                                                                <div class="col-4 text-right">
                                                                                                                    <label class="form-control-label mt-2 pl-0" for="input-username"> Father/Husband</label>
                                                                                                                </div>
                                                                                                                <div class="col-8">
                                                                                                                    <input type="text" formControlName="Father_Husband" [(ngModel)]="model.Father_Husband" class="form-control  form-control-alternative">
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="row form-group">

                                                                                                                <div class="col-4 text-right">
                                                                                                                    <label class="form-control-label mt-2 pl-0 required"> Age</label>
                                                                                                                </div>
                                                                                                                <div class="col-8">
                                                                                                                    <div class="row">
                                                                                                                        <div class="col-sm-4">
                                                                                                                            <input type="text" formControlName="Age" [(ngModel)]="model.Age" (change)="AgeChange()" class="form-control  form-control-alternative" placeholder="Age">
                                                                                                                            <small class="text-danger" *ngIf="Form7.controls.Age.hasError('required') && submitted">
                                                                                                                                This value is required.
                                                                                                                            </small>
                                                                                                                        </div>
                                                                                                                        <div class="col-sm-1 p-0 mt-2 text-center">
                                                                                                                            OR
                                                                                                                        </div>

                                                                                                                        <div class="col-sm-5 pr-0">
                                                                                                                            <Datetime-Component formControlName="DOB" placeholder="DD/MM/YYYY" (DateChangeValue)="onDOBChanged($event)" [(ngModel)]="model.DOB">
                                                                                                                            </Datetime-Component>

                                                                                                                        </div>

                                                                                                                        <div class="col-2 text-right">
                                                                                                                            <label class="form-control-label mt-2 pl-0" for="input-username"> DOB</label>
                                                                                                                        </div>

                                                                                                                    </div>

                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="row form-group">
                                                                                                                <div class="col-4 text-right">
                                                                                                                    <label class="form-control-label mt-2 pl-0 required" for="input-username"> Gender</label>
                                                                                                                </div>
                                                                                                                <div class="col-8">
                                                                                                                    <select class="form-control  form-control-alternative" formControlName="Gender" [(ngModel)]="model.Gender">
                                                                                                                        <option *ngFor="let item of GenderList" [value]="item.ID">
                                                                                                                            {{item.Value}}
                                                                                                                        </option>
                                                                                                                    </select>
                                                                                                                    <small class="text-danger" *ngIf="Form7.controls.Gender.hasError('required') && submitted">
                                                                                                                        This value is required.
                                                                                                                    </small>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="row form-group">
                                                                                                                <div class="col-4 text-right">
                                                                                                                    <label class="form-control-label mt-2 pl-0 required" for="input-username"> Mobile</label>
                                                                                                                </div>
                                                                                                                <div class="col-8">
                                                                                                                    <input type="text" id="" formControlName="Mobile" [(ngModel)]="model.Mobile" appPhoneMask class="form-control  form-control-alternative" placeholder="Mobile">
                                                                                                                    <small class="text-danger" *ngIf="Form7.controls.Mobile.hasError('required') && submitted">
                                                                                                                        This value is required.
                                                                                                                    </small>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="row form-group">
                                                                                                                <div class="col-4 text-right">
                                                                                                                    <label class="form-control-label mt-2 pl-0" for="input-username"> Email</label>
                                                                                                                </div>
                                                                                                                <div class="col-8">
                                                                                                                    <input type="text" id="" formControlName="Email" [(ngModel)]="model.Email" class="form-control  form-control-alternative" placeholder="Email">

                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="row form-group" *ngIf="IsCNICMandatory==false">
                                                                                                                <div class="col-4 text-right">
                                                                                                                    <label class="form-control-label mt-2 pl-0" for="input-username"> CNIC</label>
                                                                                                                </div>
                                                                                                                <div class="col-8">
                                                                                                                    <input type="text" id="" formControlName="CNIC" [(ngModel)]="model.CNIC" class="form-control  form-control-alternative" placeholder="XXXXX-XXXXXXX-X">

                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="row form-group" *ngIf="IsCNICMandatory==true">
                                                                                                                <div class="col-4 text-right">
                                                                                                                    <label class="form-control-label mt-2 pl-0 required" for="input-username"> CNIC</label>
                                                                                                                </div>
                                                                                                                <div class="col-8">
                                                                                                                    <input type="text" id="" formControlName="CNIC" [(ngModel)]="model.CNIC" class="form-control  form-control-alternative" placeholder="XXXXX-XXXXXXX-X">
                                                                                                                    <small class="text-danger" *ngIf="Form7.controls.CNIC.hasError('required') && submitted">
                                                                                                                        This value is required.
                                                                                                                    </small>
                                                                                                                    <small *ngIf="Form7.controls.CNIC.hasError('pattern') && !Form7.controls.CNIC.hasError('required')">
                                                                                                                        CNIC No must follow the XXXXX-XXXXXXX-X format!"
                                                                                                                    </small>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="row form-group">
                                                                                                                <div class="col-4 text-right">
                                                                                                                    <label class="form-control-label mt-2 pl-0" for="input-username"> MRNO</label>
                                                                                                                </div>
                                                                                                                <div class="col-8">
                                                                                                                    <input type="text" id="" formControlName="MRNO" [(ngModel)]="model.MRNO" class="form-control  form-control-alternative" placeholder="MRNO">
                                                                                                                    <small class="text-danger" *ngIf="Form7.controls.MRNO.hasError('required') && submitted">
                                                                                                                        This value is required.
                                                                                                                    </small>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="row form-group">
                                                                                                                <div class="col-4 text-right">
                                                                                                                    <label class="form-control-label mt-2 pl-0" for="input-username"> Bill Type</label>
                                                                                                                </div>
                                                                                                                <div class="col-8">
                                                                                                                    <select class="form-control  form-control-alternative" formControlName="BillTypeId" [(ngModel)]="model.BillTypeId">
                                                                                                                        <option *ngFor="let item of BillTypeList" [value]="item.ID">
                                                                                                                            {{item.Value}}
                                                                                                                        </option>
                                                                                                                    </select>
                                                                                                                    <small class="text-danger" *ngIf="Form7.controls.Gender.hasError('required') && submitted">
                                                                                                                        This value is required.
                                                                                                                    </small>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="row form-group">
                                                                                                                <div class="col-4 text-right">
                                                                                                                    <label class="form-control-label mt-2 pl-0" for="input-username"> Note</label>
                                                                                                                </div>
                                                                                                                <div class="col-8">
                                                                                                                    <textarea type="text" class="form-control m-input" placeholder="Note" formControlName="Notes" [(ngModel)]="model.Notes"></textarea>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <div class="col-sm-5">
                                                                                                            <div class="img-box">
                                                                                                                <div class="col-sm-12" *ngIf="model.Image!=''">
                                                                                                                    <img [src]="PatientImage" class="Img_upload" />
                                                                                                                </div>
                                                                                                                <File-Component class="UploadActnWrap" [(ngModel)]="model.Image" (ClearModel)="ClearImageUrl()" (FileNameEvent)="getImageUrlName($event)" (IsNewFileEvents1)="IsNewImageEvent($event)" [ImageWithAddress]="true" [ngModelOptions]="{standalone:true}"></File-Component>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div class="modal-footer">
                                                                                                        <button type="submit" class="btn btn-primary" *ngIf="PatientControlRights.EditRights">Update</button>
                                                                                                    </div>
                                                                                                </form>

                                                                                            </div>
                                                                                            <div class="col-sm-12">
                                                                                                <form [formGroup]="Form7" novalidate (ngSubmit)="PatientSaveOrUpdate(Form7.valid)">
                                                                                                    <div class="row justify-content-between mt-4">
                                                                                                        <div class="col-sm-7">
                                                                                                            <div class="row">
                                                                                                                <div class="col-sm-4 text-right">
                                                                                                                    <label>
                                                                                                                        Blood Group
                                                                                                                    </label>
                                                                                                                </div>
                                                                                                                <div class="col-sm-8">
                                                                                                                    <div class="form-group">
                                                                                                                        <select class="form-control " formControlName="BloodGroupId" [(ngModel)]="model.BloodGroupId">
                                                                                                                            <option *ngFor="let item of BloodList" [value]="item.ID">
                                                                                                                                {{item.Value}}
                                                                                                                            </option>
                                                                                                                        </select>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="row">
                                                                                                                <div class="col-sm-4 text-right">
                                                                                                                    <label>
                                                                                                                        Anniversary Date
                                                                                                                    </label>
                                                                                                                </div>
                                                                                                                <div class="col-sm-8">
                                                                                                                    <div class="form-group">
                                                                                                                        <Datetime-Component formControlName="AnniversaryDate" placeholder="DD/MM/YYYY" (DateChangeValue)="onAnniversaryDateChanged($event)" [(ngModel)]="model.AnniversaryDate">
                                                                                                                        </Datetime-Component>

                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="row">
                                                                                                                <div class="col-sm-4 text-right">
                                                                                                                    <label>
                                                                                                                        Contact No (Alt)
                                                                                                                    </label>
                                                                                                                </div>
                                                                                                                <div class="col-sm-8">
                                                                                                                    <div class="form-group">
                                                                                                                        <input class="form-control" formControlName="ContactNo" [(ngModel)]="model.ContactNo" />
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="row">
                                                                                                                <div class="col-sm-4 text-right">
                                                                                                                    <label>
                                                                                                                        Emergency No.
                                                                                                                    </label>
                                                                                                                </div>
                                                                                                                <div class="col-sm-8">
                                                                                                                    <div class="form-group">
                                                                                                                        <input class="form-control" formControlName="EmergencyNo" [(ngModel)]="model.EmergencyNo" />
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div class="row">
                                                                                                                <div class="col-sm-4 text-right">
                                                                                                                    <label>
                                                                                                                        Address
                                                                                                                    </label>
                                                                                                                </div>
                                                                                                                <div class="col-sm-8">
                                                                                                                    <div class="form-group">
                                                                                                                        <textarea class="form-control" formControlName="Address" [(ngModel)]="model.Address"></textarea>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="row">
                                                                                                                <div class="col-sm-4 text-right">
                                                                                                                    <label>
                                                                                                                        Notes
                                                                                                                    </label>
                                                                                                                </div>
                                                                                                                <div class="col-sm-8">
                                                                                                                    <div class="form-group">
                                                                                                                        <textarea class="form-control" formControlName="Notes" [(ngModel)]="model.Notes"></textarea>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                            <div class="row">
                                                                                                                <div class="col-sm-4 text-right">
                                                                                                                    <label>
                                                                                                                        Referred by
                                                                                                                    </label>
                                                                                                                </div>
                                                                                                                <div class="col-sm-8">
                                                                                                                    <div class="form-group">
                                                                                                                        <input class="form-control" formControlName="ReferredBy" [(ngModel)]="model.ReferredBy" placeholder="Enter Name" /> <!--id="DoctorSearch" (click)="LoadDoctor()"-->
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>

                                                                                                        </div>

                                                                                                    </div>
                                                                                                    <div class="modal-footer">
                                                                                                        <button type="submit" class="btn btn-primary" *ngIf="PatientControlRights.EditRights">Update</button>
                                                                                                    </div>
                                                                                                </form>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="tab-pane" id="HealthInformation">
                                                                                    <form [formGroup]="Form7" novalidate (ngSubmit)="PatientSaveOrUpdate(Form7.valid)">
                                                                                        <div class="row mt-5">
                                                                                            <div class="col-sm-12 CustomAccordion">

                                                                                                <ngb-accordion [closeOthers]="true" activeIds="static-1">

                                                                                                    <ngb-panel id="static-1">
                                                                                                        <ng-template ngbPanelTitle>
                                                                                                            <span>
                                                                                                                <img src="../assets/app/media/img/icons/illness.png" class="img-fluid radius">

                                                                                                                Illness
                                                                                                            </span><i class="icon-chevron-right iconImage"></i>
                                                                                                        </ng-template>
                                                                                                        <ng-template ngbPanelContent>
                                                                                                            <div class="col-sm-12">
                                                                                                                <div class="row">
                                                                                                                    <div class="custom-control custom-checkbox mb-3">
                                                                                                                        <input type="checkbox" class="custom-control-input" id="customCheck" formControlName="Illness_Diabetes" [(ngModel)]="model.Illness_Diabetes">
                                                                                                                        <label class="custom-control-label" for="customCheck">Diabetes</label>
                                                                                                                    </div>

                                                                                                                    <div class="custom-control custom-checkbox mb-3 ml-5">
                                                                                                                        <input type="checkbox" class="custom-control-input" id="customCheckTuberculosis" formControlName="Illness_Tuberculosis" [(ngModel)]="model.Illness_Tuberculosis">
                                                                                                                        <label class="custom-control-label" for="customCheckTuberculosis">Tuberculosis</label>
                                                                                                                    </div>

                                                                                                                    <div class="custom-control custom-checkbox mb-3 ml-5">
                                                                                                                        <input type="checkbox" class="custom-control-input" id="customCheckHeartPatient" formControlName="Illness_HeartPatient" [(ngModel)]="model.Illness_HeartPatient">
                                                                                                                        <label class="custom-control-label" for="customCheckHeartPatient"> Heart Patient</label>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div class="row">
                                                                                                                    <div class="custom-control custom-checkbox mb-3">
                                                                                                                        <input type="checkbox" class="custom-control-input" id="customCheckBloodPressure" formControlName="Illness_BloodPressure" [(ngModel)]="model.Illness_BloodPressure">
                                                                                                                        <label class="custom-control-label" for="customCheckBloodPressure">Blood Pressure</label>
                                                                                                                    </div>

                                                                                                                    <div class="custom-control custom-checkbox mb-3 ml-5">
                                                                                                                        <input type="checkbox" class="custom-control-input" id="customCheckMigraine" formControlName="Illness_Migraine" [(ngModel)]="model.Illness_Migraine">
                                                                                                                        <label class="custom-control-label" for="customCheckMigraine">Migraine</label>
                                                                                                                    </div>

                                                                                                                    <div class="custom-control custom-checkbox mb-3 ml-5">
                                                                                                                        <input type="checkbox" class="custom-control-input" id="customCheckLungsRelated" formControlName="Illness_LungsRelated" [(ngModel)]="model.Illness_LungsRelated">
                                                                                                                        <label class="custom-control-label" for="customCheckLungsRelated">  Lungs related</label>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div class="row">
                                                                                                                    <div class="mb-3 col-sm-7 p-0 mt-1">
                                                                                                                        <div class="form-group">
                                                                                                                            <input class="form-control" style="max-width: 428px;" placeholder="Other" formControlName="Illness_Other" [(ngModel)]="model.Illness_Other" />
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                </div>

                                                                                                            </div>
                                                                                                        </ng-template>
                                                                                                    </ngb-panel>

                                                                                                    <ngb-panel id="static2">
                                                                                                        <ng-template ngbPanelTitle>
                                                                                                            <span>
                                                                                                                <img src="../assets/app/media/img/icons/allergies.png" class="img-fluid radius">

                                                                                                                Allergies
                                                                                                            </span><i class="icon-chevron-right iconImage"></i>
                                                                                                        </ng-template>
                                                                                                        <ng-template ngbPanelContent>
                                                                                                            <div class="row">
                                                                                                                <div class="col-sm-5">
                                                                                                                    <div class="form-group">
                                                                                                                        <input class="form-control" placeholder="Food" formControlName="Allergies_Food" [(ngModel)]="model.Allergies_Food" />
                                                                                                                    </div>

                                                                                                                    <div class="form-group mt-3 mb-3">
                                                                                                                        <input class="form-control" placeholder="Drug" formControlName="Allergies_Drug" [(ngModel)]="model.Allergies_Drug" />
                                                                                                                    </div>

                                                                                                                    <div class="form-group">
                                                                                                                        <input class="form-control" placeholder="Others" formControlName="Allergies_Other" [(ngModel)]="model.Allergies_Other" />
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </ng-template>
                                                                                                    </ngb-panel>


                                                                                                    <ngb-panel id="static3">
                                                                                                        <ng-template ngbPanelTitle>
                                                                                                            <span>
                                                                                                                <img src="../assets/app/media/img/icons/habits.png" class="img-fluid radius">

                                                                                                                Habits
                                                                                                            </span><i class="icon-chevron-right iconImage"></i>
                                                                                                        </ng-template>
                                                                                                        <ng-template ngbPanelContent>
                                                                                                            <div class="row">
                                                                                                                <div class="col-sm-8">
                                                                                                                    <table class="table table-bordered">
                                                                                                                        <tbody>
                                                                                                                            <tr>
                                                                                                                                <td style="width:200px">
                                                                                                                                    <h6>
                                                                                                                                        Smoking
                                                                                                                                    </h6>
                                                                                                                                </td>

                                                                                                                                <td>
                                                                                                                                    <div class="custom-control custom-radio mr-5">
                                                                                                                                        <input type="radio" class="custom-control-input" name="Habits_Smoking" id="Habits_Smoking" value="N" formControlName="Habits_Smoking" [(ngModel)]="model.Habits_Smoking">
                                                                                                                                        <label class="custom-control-label" for="Habits_Smoking">Never</label>
                                                                                                                                    </div>
                                                                                                                                </td>
                                                                                                                                <td>
                                                                                                                                    <div class="custom-control custom-radio mr-5">
                                                                                                                                        <input type="radio" class="custom-control-input" name="Habits_Smoking" id="Habits_Smoking1" value="O" formControlName="Habits_Smoking" [(ngModel)]="model.Habits_Smoking">
                                                                                                                                        <label class="custom-control-label" for="Habits_Smoking1">Occational</label>
                                                                                                                                    </div>
                                                                                                                                </td>
                                                                                                                                <td>
                                                                                                                                    <div class="custom-control custom-radio">
                                                                                                                                        <input type="radio" class="custom-control-input" name="Habits_Smoking" id="Habits_Smoking2" value="H" formControlName="Habits_Smoking" [(ngModel)]="model.Habits_Smoking">
                                                                                                                                        <label class="custom-control-label" for="Habits_Smoking2">Habitual</label>
                                                                                                                                    </div>
                                                                                                                                </td>
                                                                                                                            </tr>



                                                                                                                            <tr>
                                                                                                                                <td>
                                                                                                                                    <h6>
                                                                                                                                        Drinking
                                                                                                                                    </h6>
                                                                                                                                </td>

                                                                                                                                <td>
                                                                                                                                    <div class="custom-control custom-radio mr-5">
                                                                                                                                        <input type="radio" class="custom-control-input" name="Habits_Drinking" id="Habits_Drinking" value="N" formControlName="Habits_Drinking" [(ngModel)]="model.Habits_Drinking">
                                                                                                                                        <label class="custom-control-label" for="Habits_Drinking">Never</label>
                                                                                                                                    </div>
                                                                                                                                </td>
                                                                                                                                <td>
                                                                                                                                    <div class="custom-control custom-radio mr-5">
                                                                                                                                        <input type="radio" class="custom-control-input" name="Habits_Drinking" id="Habits_Drinking1" value="O" formControlName="Habits_Drinking" [(ngModel)]="model.Habits_Drinking">
                                                                                                                                        <label class="custom-control-label" for="Habits_Drinking1">Occational</label>
                                                                                                                                    </div>
                                                                                                                                </td>
                                                                                                                                <td>
                                                                                                                                    <div class="custom-control custom-radio">
                                                                                                                                        <input type="radio" class="custom-control-input" name="Habits_Drinking" id="Habits_Drinking2" value="H" formControlName="Habits_Drinking" [(ngModel)]="model.Habits_Drinking">
                                                                                                                                        <label class="custom-control-label" for="Habits_Drinking2">Habitual</label>
                                                                                                                                    </div>
                                                                                                                                </td>
                                                                                                                            </tr>


                                                                                                                            <tr>
                                                                                                                                <td>
                                                                                                                                    <h6>
                                                                                                                                        Tobacco
                                                                                                                                    </h6>
                                                                                                                                </td>

                                                                                                                                <td>
                                                                                                                                    <div class="custom-control custom-radio mr-5">
                                                                                                                                        <input type="radio" class="custom-control-input" name="Habits_Tobacco" id="Habits_Tobacco" value="N" formControlName="Habits_Tobacco" [(ngModel)]="model.Habits_Tobacco">
                                                                                                                                        <label class="custom-control-label" for="Habits_Tobacco">Never</label>
                                                                                                                                    </div>
                                                                                                                                </td>
                                                                                                                                <td>
                                                                                                                                    <div class="custom-control custom-radio mr-5">
                                                                                                                                        <input type="radio" class="custom-control-input" name="Habits_Tobacco" id="Habits_Tobacco1" value="O" formControlName="Habits_Tobacco" [(ngModel)]="model.Habits_Tobacco">
                                                                                                                                        <label class="custom-control-label" for="Habits_Tobacco1">Occational</label>
                                                                                                                                    </div>
                                                                                                                                </td>
                                                                                                                                <td>
                                                                                                                                    <div class="custom-control custom-radio">
                                                                                                                                        <input type="radio" class="custom-control-input" name="Habits_Tobacco" id="Habits_Tobacco2" value="H" formControlName="Habits_Tobacco" [(ngModel)]="model.Habits_Tobacco">
                                                                                                                                        <label class="custom-control-label" for="Habits_Tobacco2">Habitual</label>
                                                                                                                                    </div>
                                                                                                                                </td>
                                                                                                                            </tr>
                                                                                                                        </tbody>
                                                                                                                    </table>

                                                                                                                </div>

                                                                                                            </div>


                                                                                                            <div class="row">
                                                                                                                <div class="col-sm-8 mt-2">
                                                                                                                    <div class="form-group">
                                                                                                                        <input class="form-control" placeholder="Others" formControlName="Habits_Other" [(ngModel)]="model.Habits_Other" />
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </ng-template>
                                                                                                    </ngb-panel>


                                                                                                </ngb-accordion>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="modal-footer">
                                                                                            <button type="submit" class="btn btn-primary" *ngIf="PatientControlRights.EditRights">Update</button>

                                                                                        </div>
                                                                                    </form>
                                                                                </div>
                                                                                <div class="tab-pane" id="MedicalHistory">
                                                                                    <form [formGroup]="Form7" novalidate (ngSubmit)="PatientSaveOrUpdate(Form7.valid)">
                                                                                        <div class="row mt-5">
                                                                                            <div class="col-sm-7">
                                                                                                <div class="row">
                                                                                                    <div class="col-sm-4 text-right">
                                                                                                        <label>
                                                                                                            Past Medical History
                                                                                                        </label>
                                                                                                    </div>
                                                                                                    <div class="col-sm-8">
                                                                                                        <div class="form-group">
                                                                                                            <textarea class="form-control" formControlName="MedicalHistory" [(ngModel)]="model.MedicalHistory"></textarea>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>

                                                                                                <div class="row">
                                                                                                    <div class="col-sm-4 text-right">
                                                                                                        <label>
                                                                                                            Family History
                                                                                                        </label>
                                                                                                    </div>
                                                                                                    <div class="col-sm-8">
                                                                                                        <div class="form-group">
                                                                                                            <input class="form-control" formControlName="CurrentMedication" [(ngModel)]="model.CurrentMedication" />
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>

                                                                                                <div class="row">
                                                                                                    <div class="col-sm-4 text-right">
                                                                                                        <label>
                                                                                                            Surgical History
                                                                                                        </label>
                                                                                                    </div>
                                                                                                    <div class="col-sm-8">
                                                                                                        <div class="form-group">
                                                                                                            <input class="form-control" formControlName="HabitsHistory" [(ngModel)]="model.HabitsHistory" />
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                        <div class="modal-footer">
                                                                                            <button type="submit" class="btn btn-primary" *ngIf="PatientControlRights.EditRights">Update</button>
                                                                                        </div>
                                                                                    </form>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<!-- Add New Patient Modal  content -->
<ng-template #content let-modal class="PatientModal">
    <div class="modal-header PatientModal">
        <h4 class="modal-title" id="modal-basic-title">
            <img src="../assets/app/media/img/icons/addpatient.png" class="img-fluid icon">
            Add New Patient
        </h4>
        <button type="button" #closeModal class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <form [formGroup]="Form1" novalidate (ngSubmit)="PatientSaveOrUpdate(Form1.valid)">
        <div class="modal-body">

            <div class="row">
                <div class="col-sm-7">

                    <div class="row form-group">
                        <div class="col-4 text-right">
                            <label class="form-control-label mt-2 pl-0 required" for="input-username"> Name</label>
                        </div>
                        <div class="col-8 d-flex">
                            <select class="form-control form-control-sm" style="max-width:100px;" formControlName="PrefixTittleId" [(ngModel)]="model.PrefixTittleId">
                                <option *ngFor="let item of TittleList" [value]="item.ID">
                                    {{item.Value}}
                                </option>
                            </select>
                            <input type="text" id="" formControlName="PatientName" [(ngModel)]="model.PatientName" class="form-control form-control-sm form-control-alternative" placeholder="Patient Name">
                            <small class="text-danger" *ngIf="Form1.controls.PatientName.hasError('required') && submitted">
                                This value is required.
                            </small>
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-4 text-right">
                            <label class="form-control-label mt-2 pl-0" for="input-username"> Father/Husband</label>
                        </div>
                        <div class="col-8">
                            <input type="text" formControlName="Father_Husband" [(ngModel)]="model.Father_Husband" class="form-control  form-control-alternative">
                        </div>
                    </div>

                    <div class="row form-group">

                        <div class="col-4 text-right">
                            <label class="form-control-label mt-2 pl-0 required"> Age</label>
                        </div>
                        <div class="col-8">
                            <div class="row">
                                <div class="col-sm-4">
                                    <input type="text" formControlName="Age" [(ngModel)]="model.Age" (change)="AgeChange()" class="form-control  form-control-alternative" placeholder="Age">
                                    <small class="text-danger" *ngIf="Form1.controls.Age.hasError('required') && submitted">
                                        This value is required.
                                    </small>
                                </div>
                                <div class="col-sm-1 p-0 mt-2 text-center text-danger" style="right:8px;">
                                    OR
                                </div>

                                <div class="col-sm-5 p-0">
                                    <Datetime-Component formControlName="DOB" placeholder="DD/MM/YYYY" (DateChangeValue)="onDOBChanged($event)" [(ngModel)]="model.DOB">
                                    </Datetime-Component>

                                </div>

                                <div class="col-2 text-right">
                                    <label class="form-control-label mt-2 pl-0" for="input-username"> DOB</label>
                                </div>

                            </div>

                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-4 text-right">
                            <label class="form-control-label mt-2 pl-0 required" for="input-username"> Gender</label>
                        </div>
                        <div class="col-8">
                            <select class="form-control form-control-sm form-control-alternative" formControlName="Gender" (change)="GenderChnage(model.Gender)" [(ngModel)]="model.Gender">
                                <option *ngFor="let item of GenderList" [value]="item.ID">
                                    {{item.Value}}
                                </option>

                            </select>
                            <small class="text-danger" *ngIf="Form1.controls.Gender.hasError('required') && submitted">
                                This value is required.
                            </small>
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col-4 text-right">
                            <label class="form-control-label mt-2 pl-0 required" for="input-username"> Mobile</label>
                        </div>
                        <div class="col-8">
                            <input type="text" id="" formControlName="Mobile" [(ngModel)]="model.Mobile" appPhoneMask class="form-control form-control-sm form-control-alternative" placeholder="Mobile">
                            <small class="text-danger" *ngIf="Form1.controls.Mobile.hasError('required') && submitted">
                                This value is required.
                            </small>
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col-4 text-right">
                            <label class="form-control-label mt-2 pl-0" for="input-username"> Email</label>
                        </div>
                        <div class="col-8">
                            <input type="text" id="" formControlName="Email" [(ngModel)]="model.Email" class="form-control form-control-sm form-control-alternative" placeholder="Email">
                        </div>
                    </div>
                    <div class="row form-group" *ngIf="IsCNICMandatory==false">
                        <div class="col-4 text-right">
                            <label class="form-control-label mt-2 pl-0" for="input-username"> CNIC</label>
                        </div>
                        <div class="col-8">
                            <input type="text" id="" formControlName="CNIC" [(ngModel)]="model.CNIC" class="form-control  form-control-alternative" placeholder="XXXXX-XXXXXXX-X">

                        </div>
                    </div>
                    <div class="row form-group" *ngIf="IsCNICMandatory==true">
                        <div class="col-4 text-right">
                            <label class="form-control-label mt-2 pl-0 required" for="input-username"> CNIC</label>
                        </div>
                        <div class="col-8">
                            <input type="text" id="" formControlName="CNIC" [(ngModel)]="model.CNIC" class="form-control  form-control-alternative" placeholder="XXXXX-XXXXXXX-X">
                            <small class="text-danger" *ngIf="Form1.controls.CNIC.hasError('required') && submitted">
                                This value is required.
                            </small>
                            <small *ngIf="Form1.controls.CNIC.hasError('pattern') && !Form1.controls.CNIC.hasError('required')">
                                CNIC No must follow the XXXXX-XXXXXXX-X format!"
                            </small>
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col-4 text-right">
                            <label class="form-control-label mt-2 pl-0" for="input-username"> MRNO</label>
                        </div>
                        <div class="col-8">
                            <input type="text" id="" formControlName="MRNO" [(ngModel)]="model.MRNO" class="form-control form-control-sm form-control-alternative" placeholder="MRNO" readonly="readonly">
                            <small class="text-danger" *ngIf="Form1.controls.MRNO.hasError('required') && submitted">
                                This value is required.
                            </small>
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-4 text-right">
                            <label class="form-control-label mt-2 pl-0" for="input-username"> Bill Type</label>
                        </div>
                        <div class="col-8">
                            <select class="form-control  form-control-alternative" formControlName="BillTypeId" [(ngModel)]="model.BillTypeId">
                                <option *ngFor="let item of BillTypeList" [value]="item.ID">
                                    {{item.Value}}
                                </option>
                            </select>
                            <small class="text-danger" *ngIf="Form1.controls.Gender.hasError('required') && submitted">
                                This value is required.
                            </small>
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-4 text-right">
                            <label class="form-control-label mt-2 pl-0" for="input-username"> Note</label>
                        </div>
                        <div class="col-8">
                            <textarea type="text" class="form-control m-input" formControlName="Notes" [(ngModel)]="model.Notes" placeholder="Note"></textarea>
                        </div>
                    </div>

                </div>

                <div class="col-sm-5">
                    <div class="form-group img-box">
                        <div class="col-sm-12" *ngIf="model.Image!=''">
                            <img [src]="PatientImage" style="width: 80px;height: 80px;border-radius: 50%;display: table;" />
                        </div>
                        <File-Component class="UploadActnWrap" [(ngModel)]="model.Image" (ClearModel)="ClearImageUrl()" (FileNameEvent)="getImageUrlName($event)" (IsNewFileEvents1)="IsNewImageEvent($event)" [ImageWithAddress]="true" [ngModelOptions]="{standalone:true}"></File-Component>

                    </div>
                </div>

            </div>



        </div>
        <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Save</button>
        </div>
    </form>
</ng-template>

<!-- =========== Appointment  Information Model ===================-->
<ng-template #longContent let-modal>
    <div class="modal-header">
        <h4 class="modal-title">
            <img src="../assets/app/media/img/icons/apptime.png" class="img-fluid icon">
            Appointment Detail
        </h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body" *ngIf="Rights.indexOf(12)>-1">
        <ngb-tabset #appt="ngbTabset">
            <ngb-tab id="tab-selectbyid1" title="Appointment">
                <ng-template ngbTabContent>
                    <form [formGroup]="Form2">
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2" for="input-username">Patient</label>
                                        </div>
                                        <div class="col-8">
                                            <div class="input-group mb-3">
                                                <input type="text" id="PatientSearchByName" class="form-control form-control-sm form-control-alternative" formControlName="PatientName" [(ngModel)]="AppointmentModel.PatientName" (click)="LoadSearchableDropdown()" (focusout)="onPatientNameEvent(AppointmentModel.PatientName,AppointmentModel.PatientId)" placeholder="Search by name/mobile or cnic" autocomplete="off">
                                                <div class="input-group-prepend btn btn-light" style="width:50px;" (click)="openNewPatient(content)">
                                                    <span class="svgIcon">
                                                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform: rotate(360deg);-webkit-transform: rotate(360deg);transform: rotate(360deg);width: 22px;margin-right: 13px;height: 22px;" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="#626262" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="stroke: #5e72e4;"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><path d="M20 8v6"></path><path d="M23 11h-6"></path></g></svg>
                                                    </span>
                                                </div>
                                            </div>
                                            <small class="text-danger" *ngIf="Form2.controls.PatientName.hasError('required') && submitted">
                                                This value is required.
                                            </small>
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2 pl-0" for="input-username"> CNIC</label>
                                        </div>
                                        <div class="col-8">
                                            <input type="text" class="form-control form-control-sm form-control-alternative" formControlName="CNIC" [(ngModel)]="AppointmentModel.CNIC" placeholder="CNIC" autocomplete="off" readonly="readonly">
                                            <!--<small class="text-danger" *ngIf="Form2.controls.CNIC.hasError('required') && submitted">
                                                This value is required.
                                            </small>
                                            <small *ngIf="Form2.controls.CNIC.hasError('pattern') && !Form2.controls.CNIC.hasError('required')">
                                                CNIC No must follow the XXXXX-XXXXXXX-X format!"
                                            </small>-->
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2 pl-0" for="input-username"> Mobile</label>
                                        </div>
                                        <div class="col-8">
                                            <input type="text" class="form-control form-control-sm form-control-alternative" formControlName="Mobile" [(ngModel)]="AppointmentModel.Mobile" placeholder="Mobile" autocomplete="off" readonly="readonly">
                                            <small class="text-danger" *ngIf="Form2.controls.Mobile.hasError('required') && submitted">
                                                This value is required.
                                            </small>
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2 pl-0" for="input-username"> Patient Prob</label>
                                        </div>
                                        <div class="col-8">
                                            <input type="text" id="" class="form-control form-control-sm form-control-alternative" formControlName="PatientProblem" [(ngModel)]="AppointmentModel.PatientProblem" placeholder="Patient Problem">
                                        </div>
                                    </div>
                                    <!-- =============== -->
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2" for="input-username"> Notes</label>
                                        </div>
                                        <div class="col-8">
                                            <textarea class="form-control-alternative form-control" formControlName="Notes" [(ngModel)]="AppointmentModel.Notes"></textarea>
                                        </div>
                                    </div>
                                    <!-- =============== -->
                                </div>
                                <div class="col-sm-6">
                                    <!-- =============== -->
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2" for="input-username"> Doctor</label>
                                        </div>
                                        <div class="col-8">
                                            <select class="form-control form-control-sm form-control-alternative" (change)="DoctorChange()" formControlName="DoctorId" [(ngModel)]="AppointmentModel.DoctorId">
                                                <option *ngFor="let item of DoctorList" [value]="item.ID">
                                                    {{item.Name}}
                                                </option>
                                            </select>
                                            <small class="text-danger" *ngIf="Form2.controls.DoctorId.hasError('required') && submitted">
                                                This value is required.
                                            </small>
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2" for="input-username"> Date</label>
                                        </div>
                                        <div class="col-8">
                                            <Datetime-Component formControlName="AppointmentDate" placeholder="DD/MM/YYYY" (DateChangeValue)="onAppDateChanged($event)" [(ngModel)]="AppointmentModel.AppointmentDate">
                                            </Datetime-Component>
                                            <small class="text-danger" *ngIf="Form2.controls.AppointmentDate.hasError('required') && submitted">
                                                This value is required.
                                            </small>
                                        </div>
                                    </div>
                                    <!-- =============== -->
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2" for="input-username"> Time </label>
                                        </div>
                                        <div class="col-8">
                                            <input type="text" formControlName="AppointmentTime" [(ngModel)]="AppointmentModel.AppointmentTime" (click)="SelectTime()" (change)="ChnageSelectTime()" class="form-control time" id="basicExample" autocomplete="off">
                                            <small class="text-danger" *ngIf="Form2.controls.AppointmentTime.hasError('required') && submitted">
                                                This value is required.
                                            </small>
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2" for="input-username"> Status</label>
                                        </div>
                                        <div class="col-8">
                                            <select class="form-control form-control-sm form-control-alternative" [ngModelOptions]="{standalone: true}" [(ngModel)]="AppointmentModel.StatusId">
                                                <option *ngFor="let item of StatusList" [value]="item.ID">
                                                    {{item.Value}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2" for="input-username"> Reminder</label>
                                        </div>
                                        <div class="col-8">
                                            <select class="form-control form-control-sm form-control-alternative" formControlName="ReminderId" [(ngModel)]="AppointmentModel.ReminderId">
                                                <option *ngFor="let item of ReminderList" [value]="item.ID">
                                                    {{item.Value}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col text-right">
                                <button class="btn btn-primary" (click)="appt.select('tab-selectbyid2')">Next</button>
                            </div>
                        </div>
                    </form>
                </ng-template>
            </ngb-tab>
            <ngb-tab id="tab-selectbyid2">
                <ng-template ngbTabTitle>Billing</ng-template>
                <ng-template ngbTabContent>
                    <form [formGroup]="Form2" novalidate (ngSubmit)="AppointmentSaveOrUpdate(Form2.valid)">
                        <div class="row">
                            <div class="col-sm-7 mt-3">
                                <div class="row">
                                    <div class="col-4 text-right">
                                        <label>
                                            Service
                                        </label>
                                    </div>
                                    <div class="col-8">
                                        <div class="form-group">
                                            <input type="text" id="ServiceSearch" (click)="LoadService()" formControlName="ServiceId" [(ngModel)]="AppointmentModel.ServiceName" class="form-control form-control-sm form-control-alternative" placeholder="Search Service" autocomplete="off">
                                            <small class="text-danger" *ngIf="Form2.controls.ServiceId.hasError('required') && submitted">
                                                This value is required.
                                            </small>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-4 text-right">
                                        <label class="form-control-label mt-2 pl-0" for="input-username"> Bill Date*</label>
                                    </div>
                                    <div class="col-8">
                                        <div class="form-group">
                                            <Datetime-Component formControlName="BillDate" placeholder="DD/MM/YYYY" (DateChangeValue)="onDateChanged($event)" [(ngModel)]="AppointmentModel.BillDate">
                                            </Datetime-Component>
                                            <small class="text-danger" *ngIf="Form2.controls.BillDate.hasError('required') && submitted">
                                                This value is required.
                                            </small>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-4 text-right">
                                        <label class="form-control-label mt-2 pl-0" for="input-username"> Price</label>
                                    </div>
                                    <div class="col-8">
                                        <div class="form-group">
                                            <input type="number" id="" formControlName="Price" [(ngModel)]="AppointmentModel.Price" (keyup)="CalAmount()" class="form-control form-control-sm form-control-alternative" placeholder="Price" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');">
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-4 text-right">

                                        <label class="form-control-label mt-2 pl-0" for="input-username"> Discount</label>
                                    </div>
                                    <div class="col-8">
                                        <div class="form-group">
                                            <input type="text" id="" formControlName="Discount" [(ngModel)]="AppointmentModel.Discount" (keyup)="CalAmount()" class="form-control form-control-sm form-control-alternative" placeholder="Discount" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');">
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-4 text-right">
                                        <label class="form-control-label mt-2 pl-0" for="input-username"> Paid Amount</label>
                                    </div>
                                    <div class="col-8">
                                        <div class="form-group">
                                            <input type="text" id="" formControlName="PaidAmount" [(ngModel)]="AppointmentModel.PaidAmount" (keyup)="PaidCalAmount()" class="form-control form-control-sm form-control-alternative" placeholder="Paid Amount" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');">
                                            <small class="text-danger" *ngIf="Form2.controls.PaidAmount.hasError('required') && submitted">
                                                This value is required.
                                            </small>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-4 text-right">
                                        <label class="form-control-label mt-2 pl-0" for="input-username"> Outstanding Balance</label>
                                    </div>
                                    <div class="col-8">
                                        <div class="form-group">
                                            <input type="text" id="" formControlName="OutstandingBalance" [(ngModel)]="AppointmentModel.OutstandingBalance" class="form-control form-control-sm form-control-alternative" placeholder="Outstanding Balance" readonly="readonly">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-4 text-right">
                                        <label class="form-control-label mt-2 pl-0" for="input-username"> Remarks</label>
                                    </div>
                                    <div class="col-8">
                                        <div class="form-group">
                                            <textarea class="form-control form-control-sm" formControlName="Remarks" [(ngModel)]="AppointmentModel.Remarks" autocomplete="off"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-5 mt-3" id="print-section">
                                <div class="coupn_card" style="border: 2px dashed #b1d0f1; padding: 10px; border-radius: 5px; line-height: initial; background: #edf6ff; color: #000000; max-width: 250px;">
                                    <h3 style="text-align: center; font-size: 22px">
                                        {{CompanyObj.CompanyName}}
                                    </h3>
                                    <h4 style="text-align: center; margin: 0;">
                                        {{AppointmentModel.PatientName}}
                                    </h4>
                                    <p style="text-align: center; margin: 0;">
                                        MR#:{{AppointmentModel.MrNo}}
                                    </p>
                                    <p style="text-align: center; margin: 0;">
                                        Paid:{{AppointmentModel.PaidAmount}}
                                    </p>
                                    <p style="text-align: center; margin: 0;">
                                        Outstanding:{{AppointmentModel.OutstandingBalance}}
                                    </p>
                                    <h1 style="text-align: center; font-size: 70px; font-weight: bold; margin: 0;">
                                        {{AppointmentModel.TokenNo}}
                                    </h1>
                                    <p style="text-align: center; margin: 0;">
                                        App Date:{{AppointmentModel.AppointmentDate|date: 'dd-MM-yy '}}{{AppointmentModel.AppointmentTime}}
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-light"
                                    type="button"
                                    (click)="handlePrint('P')">
                                <i class="icon icon-printer"></i> Print Coupon
                            </button>
                           <button type="button"(click)="handlePrint('S')" class="btn btn-primary">Save</button>
                        </div>
                    </form>
                </ng-template>
            </ngb-tab>
        </ngb-tabset>
    </div>
    <div class="modal-body NavtabLine" *ngIf="Rights.indexOf(12)==-1">
        <ngb-tabset #t="ngbTabset">
            <ngb-tab id="tab-selectbyid1" title="Appointment">
                <ng-template ngbTabContent>
                    <form [formGroup]="Form2" novalidate (ngSubmit)="AppointmentSaveOrUpdate(Form2.valid)">
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="row form-group">
                                        <div class="col-4 text-right">

                                            <label class="form-control-label mt-2" for="input-username">Patient</label>
                                        </div>
                                        <div class="col-8">
                                            <div class="input-group mb-3">

                                                <input type="text" id="PatientSearchByName" class="form-control form-control-sm form-control-alternative" formControlName="PatientName" [(ngModel)]="AppointmentModel.PatientName" (focusout)="onPatientNameEvent(AppointmentModel.PatientName)" placeholder="Search by name/mobile or cnic" autocomplete="off">
                                                <div class="input-group-prepend btn btn-light" style="width:50px;" (click)="openNewPatient(content)">
                                                    <span class="svgIcon">
                                                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" width="1em" height="1em" style="-ms-transform: rotate(360deg);-webkit-transform: rotate(360deg);transform: rotate(360deg);width: 22px;margin-right: 13px;height: 22px;" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="#626262" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="stroke: #5e72e4;"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><path d="M20 8v6"></path><path d="M23 11h-6"></path></g></svg>
                                                    </span>
                                                </div>
                                            </div>
                                            <small class="text-danger" *ngIf="Form2.controls.PatientName.hasError('required') && submitted">
                                                This value is required.
                                            </small>


                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2 pl-0" for="input-username"> CNIC</label>
                                        </div>
                                        <div class="col-8">
                                            <input type="text" class="form-control form-control-sm form-control-alternative" formControlName="CNIC" [(ngModel)]="AppointmentModel.CNIC" placeholder="XXXXX-XXXXXXX-X" autocomplete="off" readonly="readonly">
                                            <small class="text-danger" *ngIf="Form2.controls.CNIC.hasError('required') && submitted">
                                                This value is required.
                                            </small>
                                            <small *ngIf="Form2.controls.CNIC.hasError('pattern') && !Form2.controls.CNIC.hasError('required')">
                                                CNIC No must follow the XXXXX-XXXXXXX-X format!"
                                            </small>
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2 pl-0" for="input-username"> Mobile</label>
                                        </div>
                                        <div class="col-8">
                                            <input type="text" class="form-control form-control-sm form-control-alternative" formControlName="Mobile" [(ngModel)]="AppointmentModel.Mobile" placeholder="Mobile" autocomplete="off" readonly="readonly">
                                            <small class="text-danger" *ngIf="Form2.controls.Mobile.hasError('required') && submitted">
                                                This value is required.
                                            </small>
                                        </div>

                                    </div>

                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2 pl-0" for="input-username"> Patient Prob</label>
                                        </div>
                                        <div class="col-8">
                                            <input type="text" id="" class="form-control form-control-sm form-control-alternative" formControlName="PatientProblem" [(ngModel)]="AppointmentModel.PatientProblem" placeholder="Patient Problem">
                                        </div>
                                    </div>

                                    <!-- =============== -->
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2" for="input-username"> Notes</label>
                                        </div>
                                        <div class="col-8">
                                            <textarea class="form-control-alternative form-control" formControlName="Notes" [(ngModel)]="AppointmentModel.Notes"></textarea>
                                        </div>
                                    </div>
                                    <!-- =============== -->
                                </div>
                                <div class="col-sm-6">
                                    <!-- =============== -->
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2" for="input-username"> Doctor</label>
                                        </div>
                                        <div class="col-8">
                                            <select class="form-control form-control-sm form-control-alternative" (change)="DoctorChange()" formControlName="DoctorId" [(ngModel)]="AppointmentModel.DoctorId">
                                                <option *ngFor="let item of DoctorList" [value]="item.ID">
                                                    {{item.Name}}
                                                </option>
                                            </select>
                                            <small class="text-danger" *ngIf="Form2.controls.DoctorId.hasError('required') && submitted">
                                                This value is required.
                                            </small>
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2" for="input-username"> Date</label>
                                        </div>
                                        <div class="col-8">
                                            <Datetime-Component formControlName="AppointmentDate" placeholder="DD/MM/YYYY" (DateChangeValue)="onAppDateChanged($event)" [(ngModel)]="AppointmentModel.AppointmentDate">
                                            </Datetime-Component>
                                            <small class="text-danger" *ngIf="Form2.controls.AppointmentDate.hasError('required') && submitted">
                                                This value is required.
                                            </small>
                                        </div>
                                    </div>
                                    <!-- =============== -->
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2" for="input-username"> Time </label>
                                        </div>
                                        <div class="col-8">
                                            <input type="text" formControlName="AppointmentTime" [(ngModel)]="AppointmentModel.AppointmentTime" (click)="SelectTime()" (change)="ChnageSelectTime()" class="form-control time" id="basicExample" autocomplete="off">
                                            <small class="text-danger" *ngIf="Form2.controls.AppointmentTime.hasError('required') && submitted">
                                                This value is required.
                                            </small>
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2" for="input-username"> Status</label>
                                        </div>
                                        <div class="col-8">
                                            <select class="form-control form-control-sm form-control-alternative" formControlName="StatusId" [(ngModel)]="AppointmentModel.StatusId">
                                                <option *ngFor="let item of StatusList" [value]="item.ID">
                                                    {{item.Value}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row form-group">
                                        <div class="col-4 text-right">
                                            <label class="form-control-label mt-2" for="input-username"> Reminder</label>
                                        </div>
                                        <div class="col-8">
                                            <select class="form-control form-control-sm form-control-alternative" formControlName="ReminderId" [(ngModel)]="AppointmentModel.ReminderId">
                                                <option *ngFor="let item of ReminderList" [value]="item.ID">
                                                    {{item.Value}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button"(click)="handlePrint('S')" class="btn btn-primary">Save</button>
                        </div>
                    </form>
                </ng-template>
            </ngb-tab>
        </ngb-tabset>
    </div>
</ng-template>

<!-- =========== Add Doctor Model ===================-->
<ng-template #DocContent let-modal>
    <div class="modal-header">
        <h4 class="modal-title"><img src="../assets/app/media/img/icons/adddoctor.png" class="img-fluid icon"> Add Doctors</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <form [formGroup]="Form3" novalidate (ngSubmit)="SaveOrUpdate(Form3.valid)">
        <div class="modal-body  DoctorShiftModal">
            <div class="row">
                <div class="col-sm-12 px-5">


                    <div class="row form-group">
                        <div class="col-4 text-right">
                            <label>Name</label>
                        </div>
                        <div class="col-8">
                            <input type="text" formControlName="Name" [(ngModel)]="Usermodel.Name" class="form-control" maxlength="250">
                            <small *ngIf="Form3.controls.Name.hasError('required') && submitted">
                                This value is required.
                            </small>
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-4 text-right required">
                            <label>Email*</label>
                        </div>
                        <div class="col-8">
                            <input type="text" formControlName="Email" [(ngModel)]="Usermodel.Email" class="form-control" maxlength="250">
                            <small *ngIf="Form3.controls.Email.hasError('required') && submitted">
                                This value is required.
                            </small>
                            <small *ngIf="Form3.controls.Email.hasError('pattern') && !Form3.controls.Email.hasError('required')">
                                Please enter valid email.
                            </small>
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col-4 text-right">
                            <label>Password</label>
                        </div>
                        <div class="col-8">
                            <div class="input-group">
                                <input class="form-control form-control-sm md-input" id="password-field" type="password" formControlName="Pwd" [(ngModel)]="Usermodel.Pwd" maxlength="1000" placeholder="Password">

                                <span class="input-group-addon btn btn-light">
                                    <span toggle="#password-field" class="icon icon-eye field-icon toggle-password"></span>
                                </span>
                            </div>
                            <small *ngIf="Form3.controls.Pwd.hasError('required') && submitted">
                                This value is required.
                            </small>
                            <small *ngIf="Form3.controls.Pwd.hasError('minlength') && !Form3.controls.Pwd.hasError('required')">
                                At least 6 chracters
                            </small>
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col-4 text-right required">
                            <label>Phone Number*</label>
                        </div>
                        <div class="col-8">
                            <input type="text" formControlName="PhoneNo" [(ngModel)]="Usermodel.PhoneNo" appPhoneMask class="form-control" maxlength="50">
                            <small *ngIf="Form3.controls.PhoneNo.hasError('required') && submitted">
                                This value is required.
                            </small>
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col">
                            <hr>
                        </div>

                    </div>

                    <div class="row form-group">
                        <div class="col-4 text-right required">
                            <label>Role *</label>
                        </div>
                        <div class="col-8">
                            <select formControlName="RoleID" [(ngModel)]="Usermodel.adm_user_company[0].RoleID" [attr.disabled]="true" class="form-control">
                                <option *ngFor="let item of RoleList" [value]="item.ID">
                                    {{item.RoleName}}
                                </option>
                            </select>

                            <small *ngIf="Form3.controls.RoleID.hasError('required') && submitted">
                                This value is required.
                            </small>
                        </div>
                    </div>


                    <div class="row form-group">
                        <div class="col-4 text-right">
                            <label> Overlapping </label>
                        </div>
                        <div class="col-8">

                            <input type="checkbox" formControlName="IsOverLap" [(ngModel)]="Usermodel.IsOverLap" />
                            <label class="ml-2">Allow ?</label>
                        </div>
                    </div>
                    <div class="row form-group multiSelect">
                        <div class="col-4 text-right">
                            <label>Off Day</label>
                        </div>
                        <div class="col-8">
                            <ss-multiselect-dropdown class="pull-right howmanychecked" [options]="WorkingdayList" [texts]="ColumnTexts" [settings]="ColumnSettings" formControlName="DocWorkingDay" [(ngModel)]="model.DocWorkingDay"></ss-multiselect-dropdown>
                            <small *ngIf="Form3.controls.DocWorkingDay.hasError('required') && submitted">
                                This value is required.
                            </small>
                        </div>
                    </div>


                    <div class="row form-group">
                        <div class="col-4 text-right required">

                            <label>Duration *</label>
                        </div>
                        <div class="col-8">
                            <input type="text" formControlName="SlotTime" [(ngModel)]="Usermodel.SlotTime" class="form-control" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');">
                            <small *ngIf="Form3.controls.SlotTime.hasError('required') && submitted">
                                This value is required.
                            </small>
                        </div>
                    </div>


                    <div class="row form-group">
                        <div class="col-4 text-right required">
                            <label>Start Time *</label>
                        </div>
                        <div class="col-8">
                            <input type="time" formControlName="AppStartTime" [(ngModel)]="Usermodel.AppStartTime" class="form-control time" value="00:00">

                            <small *ngIf="Form3.controls.AppStartTime.hasError('required') && submitted">
                                This value is required.
                            </small>
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col-4 text-right required">

                            <label>End Time *</label>
                        </div>
                        <div class="col-8">
                            <input type="time" formControlName="AppEndTime" [(ngModel)]="Usermodel.AppEndTime" class="form-control time">

                            <small *ngIf="Form3.controls.AppEndTime.hasError('required') && submitted">
                                This value is required.
                            </small>
                        </div>
                    </div>

                    <div class="row form-group">
                        <div class="col-4 text-right required">

                            <label>Qualification</label>
                        </div>
                        <div class="col-8">
                            <input type="text" formControlName="Qualification" [(ngModel)]="Usermodel.Qualification" class="form-control">

                            <small *ngIf="Form3.controls.Qualification.hasError('required') && submitted">
                                This value is required.
                            </small>
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-4 text-right required">

                            <label>Designation</label>
                        </div>
                        <div class="col-8">
                            <input type="text" formControlName="Designation" [(ngModel)]="Usermodel.Designation" class="form-control">

                            <small *ngIf="Form3.controls.Designation.hasError('required') && submitted">
                                This value is required.
                            </small>
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-4 text-right required">

                            <label>Specialty</label>
                        </div>
                        <div class="col-8">
                            <select formControlName="SpecialtyId" [(ngModel)]="Usermodel.SpecialtyId" class="form-control">
                                <option *ngFor="let item of SpecialtyList" [value]="item.id">
                                    {{item.name}}
                                </option>
                            </select>
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-4 text-right">

                        </div>
                        <div class="col-8">
                            <span class="mr-5 ml-4">
                                <input type="radio" class="custom-control-input" name="Type" id="Type" value="R" formControlName="Type" [(ngModel)]="Usermodel.Type">
                                <label class="custom-control-label" for="Type">Resident </label>
                            </span>
                            <span>
                                <input type="radio" class="custom-control-input" name="Type" id="Type1" value="V" formControlName="Type" [(ngModel)]="Usermodel.Type">
                                <label class="custom-control-label" for="Type1">Visiting</label>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button id="saveSchedule" type="submit" class="btn btn-primary" *ngIf="!IsAdmin && ControlRights.CreateRights">Save</button>
            <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
        </div>
    </form>
</ng-template>
<!-------Add Medicine Model-->
<ng-template #MedicinePresModal let-modal>
    <div class="modal-header">
        <h4 class="modal-title">Enter Medicine for Future Use</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <form [formGroup]="Form5" novalidate (ngSubmit)="MedicineSaveOrUpdate(Form5.valid)">
        <div class="modal-body">
            <div class="row">
                <div class="col-sm-12">
                    <div class="row form-group">
                        <div class="col-4 text-right">
                            <label class="form-control-label mt-2" for="input-username">Medicine </label>
                        </div>
                        <div class="col-8">
                            <input type="text" id="" formControlName="Medicine" [(ngModel)]="MedicineModel.Medicine" class="form-control form-control-sm form-control-alternative" placeholder="">

                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-4 text-right">
                            <label class="form-control-label mt-2" for="input-username">Measure </label>
                        </div>
                        <div class="col-8">
                            <input type="text" id="" formControlName="Measure" [(ngModel)]="MedicineModel.Measure" class="form-control form-control-sm form-control-alternative" placeholder="">

                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-4 text-right">
                            <label class="form-control-label mt-2" for="input-username">Instructions </label>
                        </div>
                        <div class="col-8">
                            <div class="input-group">
                                <select class="form-control form-control-sm form-control-alternative" formControlName="InstructionId" [(ngModel)]="model.InstructionId">
                                    <option *ngFor="let item of InstructionsList" [value]="item.ID">
                                        {{item.Name}}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-4 text-right">
                            <label class="form-control-label mt-2" for="input-username">Unit </label>
                        </div>
                        <div class="col-8">
                            <div class="input-group">
                                <select class="form-control form-control-sm form-control-alternative" formControlName="UnitId" [(ngModel)]="MedicineModel.UnitId">
                                    <option *ngFor="let item of UnitList" [value]="item.ID">
                                        {{item.Value}}
                                    </option>
                                </select>

                            </div>
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-4 text-right">
                            <label class="form-control-label mt-2" for="input-username">Type </label>
                        </div>
                        <div class="col-8">
                            <div class="input-group">
                                <select class="form-control form-control-sm form-control-alternative" formControlName="TypeId" [(ngModel)]="MedicineModel.TypeId">
                                    <option *ngFor="let item of MadicineTypeList" [value]="item.ID">
                                        {{item.Value}}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Save</button>
            <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
        </div>
    </form>
</ng-template>
<!-- ============================   Medicine Tempalte Modal ========= -->
<ng-template #MedicineTemplate let-modal>
    <div class="modal-header">
        <h4 class="modal-title"> <img src="../assets/app/media/img/icons/Medicines.png" class="img-fluid icon"> Choose Medicine Template</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-sm-12">

                <div class="row form-group">
                    <div class="col-12">
                        <div class="form-group mb-0">
                            <div class="input-group input-group-alternative">
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><i class="icon icon-search"></i></span>
                                </div>
                                <input class="form-control form-control-sm form-control-alternative" placeholder="Search Medicine Template" type="text">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <div class="alert alert-secondary templateBox mb-2" role="alert" *ngFor="let temp of TemplateList" (click)="LoadTemplate(temp.MfId)">
                            <div class="mb-3">
                                <label class="" for="">{{temp.Name}}</label>
                            </div>
                            <span class="badge badge-primary mr-2" placement="top" ngbPopover="This is a very beautiful popover, show some love." *ngFor="let med of temp.medicine">{{med}} </span>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>
    <div class="modal-footer">
        <!--<button type="button" class="btn btn-primary" (click)="LoadTemplate()">Load</button>-->
        <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
    </div>
</ng-template>


<!-- ============================   Rx Print  Modal ========= -->

<ng-template #PrintRx let-modal class="RxPrintModal TemplateTwo">
    <div id="print-RxPrintModal">
        <div class="modal-header" style="font-size:12px;line-height:normal;padding: 0 15px; color:#fff;">
            <div class="row" style="color: #5e72e4; width: 100%; margin: 0; padding: 15px 0;">
                <div class="col-6">
                    <h3 style="font-size: 26px; margin: 0; line-height: normal; color: #5e72e4; font-weight: bold;"> {{DoctorInfo.Name}} </h3>
                    <p style="margin:0 0 5px;font-size:14px;line-height: normal;"> {{DoctorInfo.Qualification}} {{DoctorInfo.Designation}}</p>
                    <strong style="margin:0;font-size:13px;line-height: normal;">
                        {{DoctorInfo.Designation}}
                    </strong>
                    <p style="margin: 0; font-size: 14px; line-height: normal;">Ph: {{DoctorInfo.PhoneNo}}</p>
                </div>
                <div class="col-6" style="text-align: right; direction: rtl;" *ngIf="DoctorInfo.TemplateId==2">
                    <h3 style="font-size: 26px; margin: 0; line-height: normal; color: #5e72e4; font-weight: bold;"> {{DoctorInfo.NameUrdu}} </h3>
                    <p style="margin:0 0 5px;font-size:14px;line-height: normal;"> {{DoctorInfo.QualificationUrdu}} {{DoctorInfo.DesignationUrdu}}</p>
                    <strong style="margin:0;font-size:13px;line-height: normal;">
                        {{DoctorInfo.DesignationUrdu}}
                    </strong>
                    <p style="margin:0 0 5px;font-size:14px;line-height: normal;"> {{DoctorInfo.HeaderDescription}}</p>

                </div>
                <div class="col-6 text-right" *ngIf="PatientRXmodel.ClinicIogo != '' && PatientRXmodel.ClinicIogo != null ">
                    <img [src]="PatientRXmodel.ClinicIogo" class="img-fluid radius" style="max-width: 100px;">
                </div>
                <div class="col-6 text-right" *ngIf="PatientRXmodel.ClinicIogo =='' || PatientRXmodel.ClinicIogo == null ">
                    <img src="../assets/app/media/img/icons/doctor-logo.png" class="img-fluid radius" style="max-width: 100px;">
                </div>
            </div>
        </div>
        <div class="modal-body body_Prescription" style="height: calc(29.7cm - 200px);">
            <div class="row" style="font-size: 14px;border-bottom: 1px solid #5e72e4; margin-bottom: 3px; padding-bottom: 8px;">
                <div class="col-5">
                    <div class="form-inline" style="flex-wrap: nowrap;">
                        <label for="Name" style="font-size: 14px;">P/Name:</label>
                        <input type="text" class="bottom-line" style="border:0px;outline: none; border-bottom:1px solid #efefef;" name="Name" [(ngModel)]="PatientRXmodel.PatientName" readonly>
                    </div>
                </div>
                <div class="col-2">
                    <div class="form-inline" style="flex-wrap: nowrap;">
                        <label for="Age" style="font-size: 14px;">Age/Sex:</label>
                        <input type="text" class="bottom-line" style="border:0px;outline: none; border-bottom:1px solid #efefef;width:60px;" name="Name" [(ngModel)]="PatientRXmodel.Age" readonly>
                    </div>
                </div>
                <div class="col-2">
                    <div class="form-inline" style="flex-wrap: nowrap;">
                        <label for="Weight" style="font-size: 14px;">Weight:</label>
                        <input type="text" class="bottom-line" style="border:0px;outline: none; border-bottom:1px solid #efefef;width:60px;" name="Name" readonly>
                    </div>
                </div>
                <div class="col-3">
                    <div class="form-inline" style="flex-wrap: nowrap;">
                        <label for="Date" style="font-size: 14px;">Date:</label>
                        <input type="text" class="bottom-line" style="border:0px;outline: none; border-bottom:1px solid #efefef;width:100px;" name="Name" [(ngModel)]="PatientRXmodel.AppointmentDate" readonly>
                    </div>
                </div>

            </div>
            <div class="row" style="border-top: 3px solid #5e72e4;height: 95%;">
                <div class="col-3">
                    <div class="row mt-2">
                        <div class="col-12  text-danger">
                            <strong>Vitals:</strong>
                        </div>
                        <div class="col-12 text-danger" *ngFor="let d of PatientVitalList">
                            {{d.Name}}&nbsp;&nbsp;{{d.Measure}}&nbsp; {{d.Unit}}
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-12  text-danger">
                            <strong>Diagnoses:</strong>
                        </div>
                        <div class="col-12 text-danger" *ngFor="let d of PrescriptionModel.emr_prescription_diagnos">
                            {{d.Diagnos}}
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-12  text-danger">
                            <strong>Complaint:</strong>
                        </div>
                        <div class="col-12 text-danger" *ngFor="let d of PrescriptionModel.emr_prescription_complaint">
                            {{d.Complaint}}
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-12  text-danger">
                            <strong>Investigation:</strong>
                        </div>
                        <div class="col-12 text-danger" *ngFor="let d of PrescriptionModel.emr_prescription_investigation">
                            {{d.Investigation}}
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-12  text-danger">
                            <strong>Examination:</strong>
                        </div>
                        <div class="col-12 text-danger" *ngFor="let d of PrescriptionModel.emr_prescription_observation">
                            {{d.Observation}}
                        </div>
                    </div>
                </div>
                <div class="col-9" style="border-left: 1px solid #5e72e4">
                    <table class="table" style="margin-top: 15px;">
                        <thead>
                        <th style="border-top:0px; padding: 2px;">
                            Medicine
                        </th>
                        <th style="border-top:0px; padding: 2px;">
                            Days
                        </th>
                        <th style="border-top:0px; padding: 2px;">
                            Measure
                        </th>
                        <th style="border-top:0px; padding:0 2px 5px;">
                            Instruction
                        </th>
                        </thead>
                        <tbody>
                            <tr *ngFor="let m of emr_prescription_treatment_dynamicArray">
                                <td style="padding:2px;">
                                    {{m.MedicineName}}
                                    <label *ngIf="DoctorInfo.TemplateId==2">
                                        {{m.Instructions}}
                                    </label><br />
                                    <label *ngIf="DoctorInfo.TemplateId==2">
                                        (
                                        <span *ngIf="m.Morning > 0">{{ m.TypeId == 39 ? 'گولی صبح' : 'صبح' }} {{m.Morning}} </span>
                                        <span *ngIf="m.AfterNoon > 0">+ {{ m.TypeId == 39 ? 'گولی دوپہر' : 'دوپہر' }} {{m.AfterNoon}} </span>
                                        <span *ngIf="m.Evening > 0">+ {{ m.TypeId == 39 ? 'گولی شام' : 'شام' }} {{m.Evening}} </span>
                                        <span *ngIf="m.Night > 0">+ {{ m.TypeId == 39 ? 'گولی رات' : 'رات' }} {{m.Night}} </span>
                                        )
                                    </label>
                                    <label *ngIf="DoctorInfo.TemplateId==1">
                                        (
                                        <span *ngIf="m.Morning > 0"> {{m.Morning}} </span>
                                        <span *ngIf="m.AfterNoon > 0">+  {{m.AfterNoon}} </span>
                                        <span *ngIf="m.Evening > 0">+ {{m.Evening}} </span>
                                        <span *ngIf="m.Night > 0">+  {{m.Night}} </span>
                                        )
                                    </label>
                                </td>
                                <td style="padding:2px;">{{m.Duration}}</td>
                                <td style="padding:2px;">{{m.Measure}}</td>
                                <td style="padding:2px;">{{m.Instructions}}</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3> Instructions</h3>
                    <p style="font-size:12px;line-height:normal;" *ngFor="let m of emr_prescription_treatment_dynamicArray">
                        {{m.Instructions}},
                    </p>
                </div>
            </div>
        </div>
        <div class="modal-footer bg-secondary" style="padding: 5px 0 0px;text-align:center;">
            <div class="col">
                <p style="font-size: 13px;margin-bottom:5px; border-bottom:1px solid #efefef;">{{UsersObj.RepotFooter}}</p>
                <!--<p style="font-size: 13px;">{{UsersObj.RepotFooter}}</p>-->
            </div>
        </div>


        s
    </div>


    s
    <div style="position:fixed; right: 20px;">
        <button class="btn btn-primary" useExistingCss="true" printSectionId="print-RxPrintModal" ngxPrint> Print</button>
        <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
    </div>
</ng-template>
<!-- ============================ -->

<ng-template #EmailModal let-modal>
    <div class="modal-header">
        <h4 class="modal-title">Enter Email</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <form novalidate>
        <div class="modal-body">
            <div class="row">
                <div class="col-sm-12">
                    <div class="row form-group">
                        <div class="col-4 text-right">
                            <label class="form-control-label mt-2" for="input-username">Email </label>
                        </div>
                        <div class="col-8">

                            <input type="text" [ngModelOptions]="{standalone:true}" [(ngModel)]="model.Email" class="form-control  form-control-alternative" placeholder="Email">

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-primary" (click)="SendEmail()">Send</button>
            <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
        </div>
    </form>
</ng-template>



